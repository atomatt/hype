/* Generated by Pyrex 0.9.3.1 on Mon Nov 14 23:19:48 2005 */

#include "Python.h"
#include "structmember.h"
#ifndef PY_LONG_LONG
  #define PY_LONG_LONG LONG_LONG
#endif
#include "stdlib.h"
#include "cabin.h"
#include "estraier.h"


typedef struct {PyObject **p; char *s;} __Pyx_InternTabEntry; /*proto*/
typedef struct {PyObject **p; char *s; long n;} __Pyx_StringTabEntry; /*proto*/
static PyObject *__Pyx_UnpackItem(PyObject *, int); /*proto*/
static int __Pyx_EndUnpack(PyObject *, int); /*proto*/
static int __Pyx_PrintItem(PyObject *); /*proto*/
static int __Pyx_PrintNewline(void); /*proto*/
static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb); /*proto*/
static void __Pyx_ReRaise(void); /*proto*/
static PyObject *__Pyx_Import(PyObject *name, PyObject *from_list); /*proto*/
static PyObject *__Pyx_GetExcValue(void); /*proto*/
static int __Pyx_ArgTypeTest(PyObject *obj, PyTypeObject *type, int none_allowed, char *name); /*proto*/
static int __Pyx_TypeTest(PyObject *obj, PyTypeObject *type); /*proto*/
static int __Pyx_GetStarArgs(PyObject **args, PyObject **kwds, char *kwd_list[], int nargs, PyObject **args2, PyObject **kwds2); /*proto*/
static void __Pyx_WriteUnraisable(char *name); /*proto*/
static void __Pyx_AddTraceback(char *funcname); /*proto*/
static PyTypeObject *__Pyx_ImportType(char *module_name, char *class_name, long size);  /*proto*/
static int __Pyx_SetVtable(PyObject *dict, void *vtable); /*proto*/
static int __Pyx_GetVtable(PyObject *dict, void *vtabptr); /*proto*/
static PyObject *__Pyx_CreateClass(PyObject *bases, PyObject *dict, PyObject *name, char *modname); /*proto*/
static int __Pyx_InternStrings(__Pyx_InternTabEntry *t); /*proto*/
static int __Pyx_InitStrings(__Pyx_StringTabEntry *t); /*proto*/
static PyObject *__Pyx_GetName(PyObject *dict, PyObject *name); /*proto*/

static PyObject *__pyx_m;
static PyObject *__pyx_b;
static int __pyx_lineno;
static char *__pyx_filename;
staticforward char **__pyx_f;

/* Declarations from _hype */

staticforward PyTypeObject __pyx_type_5_hype_Database;

struct __pyx_obj_5_hype_Database {
  PyObject_HEAD
  ESTDB (*estdb);
  int _ecode;
};

staticforward PyTypeObject __pyx_type_5_hype_Document;

struct __pyx_obj_5_hype_Document {
  PyObject_HEAD
  struct __pyx_vtabstruct_5_hype_Document *__pyx_vtab;
  ESTDOC (*estdoc);
  struct __pyx_obj_5_hype_Database *db;
};

struct __pyx_vtabstruct_5_hype_Document {
  PyObject *((*init_estdoc)(struct __pyx_obj_5_hype_Document *));
};
static struct __pyx_vtabstruct_5_hype_Document *__pyx_vtabptr_5_hype_Document;

staticforward PyTypeObject __pyx_type_5_hype_Condition;

struct __pyx_obj_5_hype_Condition {
  PyObject_HEAD
  ESTCOND (*estcond);
};

staticforward PyTypeObject __pyx_type_5_hype_Search;

struct __pyx_obj_5_hype_Search {
  PyObject_HEAD
  struct __pyx_obj_5_hype_Database *database;
  struct __pyx_obj_5_hype_Condition *condition;
  int results_len;
  int (*results);
};

static PyTypeObject *__pyx_ptype_5_hype_Database = 0;
static PyTypeObject *__pyx_ptype_5_hype_Document = 0;
static PyTypeObject *__pyx_ptype_5_hype_Condition = 0;
static PyTypeObject *__pyx_ptype_5_hype_Search = 0;
static PyObject *__pyx_k13;
static int __pyx_k14;
static PyObject *__pyx_k15;
static int __pyx_k16;
static int __pyx_k17;
static int __pyx_k18;
static PyObject *__pyx_k19;
static PyObject *__pyx_k20;
static int __pyx_k21;

/* Implementation of _hype */

static char (__pyx_k1[]) = " Document ID ";
static char (__pyx_k2[]) = " A list of attribute names ";

static PyObject *__pyx_n_HyperEstraierError;
static PyObject *__pyx_n_DBError;
static PyObject *__pyx_n_DocumentError;
static PyObject *__pyx_n_DocModifyImmutableError;
static PyObject *__pyx_n_DocNeverAddedError;
static PyObject *__pyx_n_DBEditError;
static PyObject *__pyx_n_DBRemoveError;
static PyObject *__pyx_n_DBFlushError;
static PyObject *__pyx_n_DBSyncError;
static PyObject *__pyx_n_DBOptimizeError;
static PyObject *__pyx_n_doc_from_string;
static PyObject *__pyx_n_SearchIterator;
static PyObject *__pyx_n_Exception;
static PyObject *__pyx_n_False;
static PyObject *__pyx_n_object;
static PyObject *__pyx_n___init__;
static PyObject *__pyx_n___iter__;
static PyObject *__pyx_n_next;

static void __pyx_f_5_hype_8Document___dealloc__(PyObject *__pyx_v_self); /*proto*/
static void __pyx_f_5_hype_8Document___dealloc__(PyObject *__pyx_v_self) {
  int __pyx_1;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":158 */
  __pyx_1 = ((PyObject *)((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->db) != Py_None;
  if (__pyx_1) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":159 */
    Py_DECREF(((PyObject *)((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->db));
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":160 */
  __pyx_1 = (((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->estdoc != 0);
  if (__pyx_1) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":161 */
    est_doc_delete(((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->estdoc);

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":162 */
    ((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->estdoc = 0;
    goto __pyx_L3;
  }
  __pyx_L3:;

  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.Document.__dealloc__");
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
}

static char (__pyx_k23[]) = "\n        Internal function to ensure estdoc is allocated.\n        ";

static PyObject *__pyx_f_5_hype_8Document_init_estdoc(struct __pyx_obj_5_hype_Document *__pyx_v_self) {
  PyObject *__pyx_r;
  int __pyx_1;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":165 */
  __pyx_k23;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":168 */
  __pyx_1 = (__pyx_v_self->estdoc == 0);
  if (__pyx_1) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":169 */
    __pyx_v_self->estdoc = est_doc_new();
    goto __pyx_L2;
  }
  __pyx_L2:;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.Document.init_estdoc");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_8Document_2id___get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_f_5_hype_8Document_2id___get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":174 */
  __pyx_1 = ((struct __pyx_vtabstruct_5_hype_Document *)((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->__pyx_vtab)->init_estdoc(((struct __pyx_obj_5_hype_Document *)__pyx_v_self)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 174; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":175 */
  __pyx_1 = PyInt_FromLong(est_doc_id(((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->estdoc)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 175; goto __pyx_L1;}
  __pyx_r = __pyx_1;
  __pyx_1 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  __Pyx_AddTraceback("_hype.Document.id.__get__");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_n_get;

static PyObject *__pyx_k24p;

static char (__pyx_k24[]) = "@uri";

static PyObject *__pyx_f_5_hype_8Document_3uri___get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_f_5_hype_8Document_3uri___get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":179 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_get); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 179; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 179; goto __pyx_L1;}
  Py_INCREF(__pyx_k24p);
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_k24p);
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 179; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  __pyx_r = __pyx_3;
  __pyx_3 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Document.uri.__get__");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_n_append;

static PyObject *__pyx_f_5_hype_8Document_10attributes___get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_f_5_hype_8Document_10attributes___get__(PyObject *__pyx_v_self) {
  CBLIST (*__pyx_v_attrs_c);
  int __pyx_v_attrs_length;
  int __pyx_v_i;
  int __pyx_v_sp;
  PyObject *__pyx_v_attrs;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  Py_INCREF(__pyx_v_self);
  __pyx_v_attrs = Py_None; Py_INCREF(__pyx_v_attrs);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":186 */
  __pyx_1 = ((struct __pyx_vtabstruct_5_hype_Document *)((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->__pyx_vtab)->init_estdoc(((struct __pyx_obj_5_hype_Document *)__pyx_v_self)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":187 */
  __pyx_v_attrs_c = est_doc_attr_names(((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->estdoc);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":188 */
  __pyx_v_attrs_length = cblistnum(__pyx_v_attrs_c);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":189 */
  cblistsort(__pyx_v_attrs_c);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":190 */
  __pyx_1 = PyList_New(0); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 190; goto __pyx_L1;}
  Py_DECREF(__pyx_v_attrs);
  __pyx_v_attrs = __pyx_1;
  __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":191 */
  for (__pyx_v_i = 0; __pyx_v_i < __pyx_v_attrs_length; ++__pyx_v_i) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":192 */
    __pyx_1 = PyObject_GetAttr(__pyx_v_attrs, __pyx_n_append); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 192; goto __pyx_L1;}
    __pyx_2 = PyString_FromString(cblistval(__pyx_v_attrs_c,__pyx_v_i,(&__pyx_v_sp))); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 192; goto __pyx_L1;}
    __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 192; goto __pyx_L1;}
    PyTuple_SET_ITEM(__pyx_3, 0, __pyx_2);
    __pyx_2 = 0;
    __pyx_2 = PyObject_CallObject(__pyx_1, __pyx_3); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 192; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_3); __pyx_3 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __pyx_L2:;
  }
  __pyx_L3:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":193 */
  cblistclose(__pyx_v_attrs_c);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":194 */
  Py_INCREF(__pyx_v_attrs);
  __pyx_r = __pyx_v_attrs;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Document.attributes.__get__");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_attrs);
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_n_KeyError;

static PyObject *__pyx_k25p;

static char (__pyx_k25[]) = "Document has no attribute %r";

static PyObject *__pyx_f_5_hype_8Document___getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_name); /*proto*/
static PyObject *__pyx_f_5_hype_8Document___getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_name) {
  PyObject *__pyx_v_value;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  int __pyx_4;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_name);
  __pyx_v_value = Py_None; Py_INCREF(__pyx_v_value);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":197 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_get); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 197; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 197; goto __pyx_L1;}
  Py_INCREF(__pyx_v_name);
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_name);
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 197; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_v_value);
  __pyx_v_value = __pyx_3;
  __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":198 */
  __pyx_4 = __pyx_v_value != Py_None;
  if (__pyx_4) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":199 */
    Py_INCREF(__pyx_v_value);
    __pyx_r = __pyx_v_value;
    goto __pyx_L0;
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":200 */
  __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_KeyError); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 200; goto __pyx_L1;}
  __pyx_2 = PyNumber_Remainder(__pyx_k25p, __pyx_v_name); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 200; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 200; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_2);
  __pyx_2 = 0;
  __pyx_2 = PyObject_CallObject(__pyx_1, __pyx_3); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 200; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __Pyx_Raise(__pyx_2, 0, 0);
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  {__pyx_filename = __pyx_f[0]; __pyx_lineno = 200; goto __pyx_L1;}

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Document.__getitem__");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_value);
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_name);
  return __pyx_r;
}

static PyObject *__pyx_k26p;
static PyObject *__pyx_k27p;
static PyObject *__pyx_k28p;

static char (__pyx_k26[]) = "@uri";
static char (__pyx_k27[]) = "@uri";
static char (__pyx_k28[]) = "Cannot modify @uri attribute";

static int __pyx_f_5_hype_8Document___setitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_name, PyObject *__pyx_v_value); /*proto*/
static int __pyx_f_5_hype_8Document___setitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_name, PyObject *__pyx_v_value) {
  int __pyx_r;
  PyObject *__pyx_1 = 0;
  int __pyx_2;
  PyObject *__pyx_3 = 0;
  PyObject *__pyx_4 = 0;
  char (*__pyx_5);
  char (*__pyx_6);
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_name);
  Py_INCREF(__pyx_v_value);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":203 */
  __pyx_1 = ((struct __pyx_vtabstruct_5_hype_Document *)((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->__pyx_vtab)->init_estdoc(((struct __pyx_obj_5_hype_Document *)__pyx_v_self)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 203; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":204 */
  if (PyObject_Cmp(__pyx_v_name, __pyx_k26p, &__pyx_2) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 204; goto __pyx_L1;}
  __pyx_2 = __pyx_2 == 0;
  __pyx_1 = PyInt_FromLong(__pyx_2); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 204; goto __pyx_L1;}
  __pyx_2 = PyObject_IsTrue(__pyx_1); if (__pyx_2 < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 204; goto __pyx_L1;}
  if (__pyx_2) {
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    __pyx_3 = PyObject_GetAttr(__pyx_v_self, __pyx_n_get); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 204; goto __pyx_L1;}
    __pyx_4 = PyTuple_New(2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 204; goto __pyx_L1;}
    Py_INCREF(__pyx_k27p);
    PyTuple_SET_ITEM(__pyx_4, 0, __pyx_k27p);
    Py_INCREF(Py_None);
    PyTuple_SET_ITEM(__pyx_4, 1, Py_None);
    __pyx_1 = PyObject_CallObject(__pyx_3, __pyx_4); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 204; goto __pyx_L1;}
    Py_DECREF(__pyx_3); __pyx_3 = 0;
    Py_DECREF(__pyx_4); __pyx_4 = 0;
  }
  __pyx_2 = PyObject_IsTrue(__pyx_1); if (__pyx_2 < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 204; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  if (__pyx_2) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":205 */
    __pyx_3 = __Pyx_GetName(__pyx_m, __pyx_n_DocModifyImmutableError); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 205; goto __pyx_L1;}
    __pyx_4 = PyTuple_New(1); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 205; goto __pyx_L1;}
    Py_INCREF(__pyx_k28p);
    PyTuple_SET_ITEM(__pyx_4, 0, __pyx_k28p);
    __pyx_1 = PyObject_CallObject(__pyx_3, __pyx_4); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 205; goto __pyx_L1;}
    Py_DECREF(__pyx_3); __pyx_3 = 0;
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    __Pyx_Raise(__pyx_1, 0, 0);
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 205; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":206 */
  __pyx_5 = PyString_AsString(__pyx_v_name); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 206; goto __pyx_L1;}
  __pyx_6 = PyString_AsString(__pyx_v_value); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 206; goto __pyx_L1;}
  est_doc_add_attr(((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->estdoc,__pyx_5,__pyx_6);

  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_3);
  Py_XDECREF(__pyx_4);
  __Pyx_AddTraceback("_hype.Document.__setitem__");
  __pyx_r = -1;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_name);
  Py_DECREF(__pyx_v_value);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_8Document_get(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Document_get(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_name = 0;
  PyObject *__pyx_v_default = 0;
  char (*__pyx_v_value);
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  char (*__pyx_2);
  int __pyx_3;
  static char *__pyx_argnames[] = {"name","default",0};
  __pyx_v_default = __pyx_k13;
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O|O", __pyx_argnames, &__pyx_v_name, &__pyx_v_default)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_name);
  Py_INCREF(__pyx_v_default);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":210 */
  __pyx_1 = ((struct __pyx_vtabstruct_5_hype_Document *)((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->__pyx_vtab)->init_estdoc(((struct __pyx_obj_5_hype_Document *)__pyx_v_self)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 210; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":211 */
  __pyx_2 = PyString_AsString(__pyx_v_name); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 211; goto __pyx_L1;}
  __pyx_v_value = est_doc_attr(((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->estdoc,__pyx_2);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":212 */
  __pyx_3 = (__pyx_v_value == 0);
  if (__pyx_3) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":213 */
    Py_INCREF(__pyx_v_default);
    __pyx_r = __pyx_v_default;
    goto __pyx_L0;
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":214 */
  __pyx_1 = PyString_FromString(__pyx_v_value); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 214; goto __pyx_L1;}
  __pyx_r = __pyx_1;
  __pyx_1 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  __Pyx_AddTraceback("_hype.Document.get");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_name);
  Py_DECREF(__pyx_v_default);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_8Document_add_text(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Document_add_text(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_text = 0;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  char (*__pyx_2);
  static char *__pyx_argnames[] = {"text",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_text)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_text);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":217 */
  __pyx_1 = ((struct __pyx_vtabstruct_5_hype_Document *)((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->__pyx_vtab)->init_estdoc(((struct __pyx_obj_5_hype_Document *)__pyx_v_self)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 217; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":218 */
  __pyx_2 = PyString_AsString(__pyx_v_text); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 218; goto __pyx_L1;}
  est_doc_add_text(((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->estdoc,__pyx_2);

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  __Pyx_AddTraceback("_hype.Document.add_text");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_text);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_8Document_add_hidden_text(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Document_add_hidden_text(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_text = 0;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  char (*__pyx_2);
  static char *__pyx_argnames[] = {"text",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_text)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_text);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":221 */
  __pyx_1 = ((struct __pyx_vtabstruct_5_hype_Document *)((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->__pyx_vtab)->init_estdoc(((struct __pyx_obj_5_hype_Document *)__pyx_v_self)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 221; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":222 */
  __pyx_2 = PyString_AsString(__pyx_v_text); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 222; goto __pyx_L1;}
  est_doc_add_hidden_text(((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->estdoc,__pyx_2);

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  __Pyx_AddTraceback("_hype.Document.add_hidden_text");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_text);
  return __pyx_r;
}

static PyObject *__pyx_n_commit;

static PyObject *__pyx_k29p;

static char (__pyx_k29[]) = "Cannot commit an object that was never added";

static PyObject *__pyx_f_5_hype_8Document_commit(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Document_commit(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_r;
  int __pyx_1;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  PyObject *__pyx_4 = 0;
  static char *__pyx_argnames[] = {0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "", __pyx_argnames)) return 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":225 */
  __pyx_1 = ((PyObject *)((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->db) != Py_None;
  if (__pyx_1) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":226 */
    __pyx_2 = PyObject_GetAttr(((PyObject *)((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->db), __pyx_n_commit); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 226; goto __pyx_L1;}
    __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 226; goto __pyx_L1;}
    Py_INCREF(__pyx_v_self);
    PyTuple_SET_ITEM(__pyx_3, 0, __pyx_v_self);
    __pyx_4 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 226; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_3); __pyx_3 = 0;
    __pyx_r = __pyx_4;
    __pyx_4 = 0;
    goto __pyx_L0;
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":227 */
  __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_DocNeverAddedError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 227; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 227; goto __pyx_L1;}
  Py_INCREF(__pyx_k29p);
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_k29p);
  __pyx_4 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 227; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __Pyx_Raise(__pyx_4, 0, 0);
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  {__pyx_filename = __pyx_f[0]; __pyx_lineno = 227; goto __pyx_L1;}

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  Py_XDECREF(__pyx_4);
  __Pyx_AddTraceback("_hype.Document.commit");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_n_remove;

static PyObject *__pyx_k30p;

static char (__pyx_k30[]) = "Cannot remove an object that was never added";

static PyObject *__pyx_f_5_hype_8Document_remove(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Document_remove(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_options;
  PyObject *__pyx_r;
  int __pyx_1;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  PyObject *__pyx_4 = 0;
  static char *__pyx_argnames[] = {"options",0};
  __pyx_v_options = __pyx_k14;
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "|i", __pyx_argnames, &__pyx_v_options)) return 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":230 */
  __pyx_1 = ((PyObject *)((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->db) != Py_None;
  if (__pyx_1) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":231 */
    __pyx_2 = PyObject_GetAttr(((PyObject *)((struct __pyx_obj_5_hype_Document *)__pyx_v_self)->db), __pyx_n_remove); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 231; goto __pyx_L1;}
    __pyx_3 = PyInt_FromLong(__pyx_v_options); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 231; goto __pyx_L1;}
    __pyx_4 = PyTuple_New(2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 231; goto __pyx_L1;}
    Py_INCREF(__pyx_v_self);
    PyTuple_SET_ITEM(__pyx_4, 0, __pyx_v_self);
    PyTuple_SET_ITEM(__pyx_4, 1, __pyx_3);
    __pyx_3 = 0;
    __pyx_3 = PyObject_CallObject(__pyx_2, __pyx_4); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 231; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    __pyx_r = __pyx_3;
    __pyx_3 = 0;
    goto __pyx_L0;
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":232 */
  __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_DocNeverAddedError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 232; goto __pyx_L1;}
  __pyx_4 = PyTuple_New(1); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 232; goto __pyx_L1;}
  Py_INCREF(__pyx_k30p);
  PyTuple_SET_ITEM(__pyx_4, 0, __pyx_k30p);
  __pyx_3 = PyObject_CallObject(__pyx_2, __pyx_4); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 232; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  __Pyx_Raise(__pyx_3, 0, 0);
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  {__pyx_filename = __pyx_f[0]; __pyx_lineno = 232; goto __pyx_L1;}

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  Py_XDECREF(__pyx_4);
  __Pyx_AddTraceback("_hype.Document.remove");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_doc_from_string(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_doc_from_string(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  char (*__pyx_v_data);
  ESTDOC (*__pyx_v_doc_p);
  struct __pyx_obj_5_hype_Document *__pyx_v_doc;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  static char *__pyx_argnames[] = {"data",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "s", __pyx_argnames, &__pyx_v_data)) return 0;
  __pyx_v_doc = (void *)Py_None; Py_INCREF((PyObject *) __pyx_v_doc);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":237 */
  __pyx_v_doc_p = est_doc_new_from_draft(__pyx_v_data);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":238 */
  __pyx_1 = PyTuple_New(0); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 238; goto __pyx_L1;}
  __pyx_2 = PyObject_CallObject(((PyObject*)__pyx_ptype_5_hype_Document), __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 238; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  if (!__Pyx_TypeTest(__pyx_2, __pyx_ptype_5_hype_Document)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 238; goto __pyx_L1;}
  Py_DECREF(((PyObject *)__pyx_v_doc));
  __pyx_v_doc = __pyx_2;
  __pyx_2 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":239 */
  __pyx_v_doc->estdoc = __pyx_v_doc_p;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":240 */
  Py_INCREF(((PyObject *)__pyx_v_doc));
  __pyx_r = ((PyObject *)__pyx_v_doc);
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  __Pyx_AddTraceback("_hype.doc_from_string");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_doc);
  return __pyx_r;
}

static int __pyx_f_5_hype_9Condition___new__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static int __pyx_f_5_hype_9Condition___new__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_r;
  static char *__pyx_argnames[] = {0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "", __pyx_argnames)) return -1;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":246 */
  ((struct __pyx_obj_5_hype_Condition *)__pyx_v_self)->estcond = est_cond_new();

  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.Condition.__new__");
  __pyx_r = -1;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_9Condition_set_phrase(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_9Condition_set_phrase(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_phrase = 0;
  PyObject *__pyx_r;
  char (*__pyx_1);
  static char *__pyx_argnames[] = {"phrase",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_phrase)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_phrase);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":249 */
  __pyx_1 = PyString_AsString(__pyx_v_phrase); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 249; goto __pyx_L1;}
  est_cond_set_phrase(((struct __pyx_obj_5_hype_Condition *)__pyx_v_self)->estcond,__pyx_1);

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.Condition.set_phrase");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_phrase);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_9Condition_add_attr(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_9Condition_add_attr(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_attr = 0;
  PyObject *__pyx_r;
  char (*__pyx_1);
  static char *__pyx_argnames[] = {"attr",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_attr)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_attr);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":252 */
  __pyx_1 = PyString_AsString(__pyx_v_attr); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 252; goto __pyx_L1;}
  est_cond_add_attr(((struct __pyx_obj_5_hype_Condition *)__pyx_v_self)->estcond,__pyx_1);

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.Condition.add_attr");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_attr);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_9Condition_set_order(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_9Condition_set_order(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_order = 0;
  PyObject *__pyx_r;
  char (*__pyx_1);
  static char *__pyx_argnames[] = {"order",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_order)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_order);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":255 */
  __pyx_1 = PyString_AsString(__pyx_v_order); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 255; goto __pyx_L1;}
  est_cond_set_order(((struct __pyx_obj_5_hype_Condition *)__pyx_v_self)->estcond,__pyx_1);

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.Condition.set_order");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_order);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_9Condition_set_max(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_9Condition_set_max(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_max;
  PyObject *__pyx_r;
  static char *__pyx_argnames[] = {"max",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "i", __pyx_argnames, &__pyx_v_max)) return 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":258 */
  est_cond_set_max(((struct __pyx_obj_5_hype_Condition *)__pyx_v_self)->estcond,__pyx_v_max);

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.Condition.set_max");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_9Condition_set_options(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_9Condition_set_options(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_options;
  PyObject *__pyx_r;
  static char *__pyx_argnames[] = {"options",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "i", __pyx_argnames, &__pyx_v_options)) return 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":261 */
  est_cond_set_options(((struct __pyx_obj_5_hype_Condition *)__pyx_v_self)->estcond,__pyx_v_options);

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.Condition.set_options");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static void __pyx_f_5_hype_9Condition___dealloc__(PyObject *__pyx_v_self); /*proto*/
static void __pyx_f_5_hype_9Condition___dealloc__(PyObject *__pyx_v_self) {
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":264 */
  est_cond_delete(((struct __pyx_obj_5_hype_Condition *)__pyx_v_self)->estcond);

  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.Condition.__dealloc__");
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
}

static int __pyx_f_5_hype_8Database___new__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static int __pyx_f_5_hype_8Database___new__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_name = 0;
  PyObject *__pyx_v_omode = 0;
  int __pyx_r;
  char (*__pyx_1);
  int __pyx_2;
  static char *__pyx_argnames[] = {"name","omode",0};
  __pyx_v_omode = __pyx_k15;
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O|O", __pyx_argnames, &__pyx_v_name, &__pyx_v_omode)) return -1;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_name);
  Py_INCREF(__pyx_v_omode);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":271 */
  __pyx_1 = PyString_AsString(__pyx_v_name); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 271; goto __pyx_L1;}
  __pyx_2 = PyInt_AsLong(__pyx_v_omode); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 271; goto __pyx_L1;}
  ((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb = est_db_open(__pyx_1,__pyx_2,(&((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->_ecode));

  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.Database.__new__");
  __pyx_r = -1;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_name);
  Py_DECREF(__pyx_v_omode);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_8Database_close(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_close(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_r;
  int __pyx_1;
  static char *__pyx_argnames[] = {0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "", __pyx_argnames)) return 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":274 */
  __pyx_1 = (((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb != 0);
  if (__pyx_1) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":275 */
    est_db_close(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb,(&((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->_ecode));

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":276 */
    ((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb = 0;
    goto __pyx_L2;
  }
  __pyx_L2:;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.Database.close");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_n_HyperEstraierException;

static PyObject *__pyx_k31p;

static char (__pyx_k31[]) = "Database is closed.";

static PyObject *__pyx_f_5_hype_8Database__check(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5_hype_8Database__check[] = "\n        Check that the connection has not been close already.\n        ";
static PyObject *__pyx_f_5_hype_8Database__check(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_r;
  int __pyx_1;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  PyObject *__pyx_4 = 0;
  static char *__pyx_argnames[] = {0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "", __pyx_argnames)) return 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":282 */
  __pyx_1 = (((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb == 0);
  if (__pyx_1) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":283 */
    __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_HyperEstraierException); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 283; goto __pyx_L1;}
    __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 283; goto __pyx_L1;}
    Py_INCREF(__pyx_k31p);
    PyTuple_SET_ITEM(__pyx_3, 0, __pyx_k31p);
    __pyx_4 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 283; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_3); __pyx_3 = 0;
    __Pyx_Raise(__pyx_4, 0, 0);
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 283; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  Py_XDECREF(__pyx_4);
  __Pyx_AddTraceback("_hype.Database._check");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_n__check;

static PyObject *__pyx_f_5_hype_8Database_4name___get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_4name___get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":287 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 287; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 287; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 287; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":288 */
  __pyx_1 = PyString_FromString(est_db_name(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 288; goto __pyx_L1;}
  __pyx_r = __pyx_1;
  __pyx_1 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.name.__get__");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_8Database_4size___get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_4size___get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":292 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 292; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 292; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 292; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":293 */
  __pyx_1 = PyFloat_FromDouble(est_db_size(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 293; goto __pyx_L1;}
  __pyx_r = __pyx_1;
  __pyx_1 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.size.__get__");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_8Database_5ecode___get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_5ecode___get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":297 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 297; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 297; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 297; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":298 */
  __pyx_1 = PyString_FromString(est_err_msg(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->_ecode)); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 298; goto __pyx_L1;}
  __pyx_r = __pyx_1;
  __pyx_1 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.ecode.__get__");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_n_bool;

static PyObject *__pyx_f_5_hype_8Database_6efatal___get__(PyObject *__pyx_v_self); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_6efatal___get__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":302 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 302; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 302; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 302; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":303 */
  __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_bool); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 303; goto __pyx_L1;}
  __pyx_2 = PyInt_FromLong(est_db_fatal(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb)); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 303; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 303; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_2);
  __pyx_2 = 0;
  __pyx_2 = PyObject_CallObject(__pyx_1, __pyx_3); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 303; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __pyx_r = __pyx_2;
  __pyx_2 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.efatal.__get__");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static int __pyx_f_5_hype_8Database___len__(PyObject *__pyx_v_self); /*proto*/
static int __pyx_f_5_hype_8Database___len__(PyObject *__pyx_v_self) {
  int __pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":306 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 306; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 306; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 306; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":307 */
  __pyx_r = est_db_doc_num(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb);
  goto __pyx_L0;

  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.__len__");
  __pyx_r = -1;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_8Database_put_doc(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_put_doc(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_5_hype_Document *__pyx_v_doc = 0;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  static char *__pyx_argnames[] = {"doc",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_doc)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_doc);
  if (!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_doc), __pyx_ptype_5_hype_Document, 1, "doc")) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 309; goto __pyx_L1;}

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":310 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 310; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 310; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 310; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":311 */
  est_db_put_doc(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb,__pyx_v_doc->estdoc,ESTPDCLEAN);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":312 */
  Py_INCREF(__pyx_v_self);
  Py_DECREF(((PyObject *)__pyx_v_doc->db));
  ((PyObject *)__pyx_v_doc->db) = __pyx_v_self;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":313 */
  Py_INCREF(__pyx_v_self);

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.put_doc");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_doc);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_8Database_get_doc(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_get_doc(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_id;
  int __pyx_v_options;
  ESTDOC (*__pyx_v_doc_p);
  struct __pyx_obj_5_hype_Document *__pyx_v_doc;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  int __pyx_4;
  static char *__pyx_argnames[] = {"id","options",0};
  __pyx_v_options = __pyx_k16;
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "i|i", __pyx_argnames, &__pyx_v_id, &__pyx_v_options)) return 0;
  Py_INCREF(__pyx_v_self);
  __pyx_v_doc = (void *)Py_None; Py_INCREF((PyObject *) __pyx_v_doc);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":318 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 318; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 318; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 318; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":319 */
  __pyx_v_doc_p = est_db_get_doc(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb,__pyx_v_id,__pyx_v_options);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":320 */
  __pyx_4 = (__pyx_v_doc_p != 0);
  if (__pyx_4) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":321 */
    __pyx_1 = PyTuple_New(0); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 321; goto __pyx_L1;}
    __pyx_2 = PyObject_CallObject(((PyObject*)__pyx_ptype_5_hype_Document), __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 321; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    if (!__Pyx_TypeTest(__pyx_2, __pyx_ptype_5_hype_Document)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 321; goto __pyx_L1;}
    Py_DECREF(((PyObject *)__pyx_v_doc));
    __pyx_v_doc = __pyx_2;
    __pyx_2 = 0;

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":322 */
    __pyx_v_doc->estdoc = __pyx_v_doc_p;

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":323 */
    Py_INCREF(__pyx_v_self);
    Py_DECREF(((PyObject *)__pyx_v_doc->db));
    ((PyObject *)__pyx_v_doc->db) = __pyx_v_self;

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":324 */
    Py_INCREF(__pyx_v_self);

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":325 */
    Py_INCREF(((PyObject *)__pyx_v_doc));
    __pyx_r = ((PyObject *)__pyx_v_doc);
    goto __pyx_L0;
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":326 */
  Py_INCREF(Py_None);
  __pyx_r = Py_None;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.get_doc");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_doc);
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_n_get_doc;

static PyObject *__pyx_f_5_hype_8Database_get_doc_by_uri(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_get_doc_by_uri(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_uri = 0;
  int __pyx_v_id;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  char (*__pyx_4);
  static char *__pyx_argnames[] = {"uri",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_uri)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_uri);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":330 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 330; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 330; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 330; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":331 */
  __pyx_4 = PyString_AsString(__pyx_v_uri); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 331; goto __pyx_L1;}
  __pyx_v_id = est_db_uri_to_id(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb,__pyx_4);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":332 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_get_doc); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 332; goto __pyx_L1;}
  __pyx_2 = PyInt_FromLong(__pyx_v_id); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 332; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 332; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_2);
  __pyx_2 = 0;
  __pyx_2 = PyObject_CallObject(__pyx_1, __pyx_3); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 332; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __pyx_r = __pyx_2;
  __pyx_2 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.get_doc_by_uri");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_uri);
  return __pyx_r;
}

static PyObject *__pyx_n_True;

static PyObject *__pyx_k32p;

static char (__pyx_k32[]) = "Wasn't able to flush the database.";

static PyObject *__pyx_f_5_hype_8Database_flush(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_flush(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_max;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  int __pyx_4;
  static char *__pyx_argnames[] = {"max",0};
  __pyx_v_max = __pyx_k17;
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "|i", __pyx_argnames, &__pyx_v_max)) return 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":335 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 335; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 335; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 335; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":336 */
  __pyx_4 = est_db_flush(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb,__pyx_v_max);
  if (__pyx_4) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":337 */
    __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_True); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 337; goto __pyx_L1;}
    __pyx_r = __pyx_1;
    __pyx_1 = 0;
    goto __pyx_L0;
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":338 */
  __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_DBFlushError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 338; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 338; goto __pyx_L1;}
  Py_INCREF(__pyx_k32p);
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_k32p);
  __pyx_1 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 338; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __Pyx_Raise(__pyx_1, 0, 0);
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  {__pyx_filename = __pyx_f[0]; __pyx_lineno = 338; goto __pyx_L1;}

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.flush");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_k33p;

static char (__pyx_k33[]) = "Wasn't able to sync the database.";

static PyObject *__pyx_f_5_hype_8Database_sync(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_sync(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  int __pyx_4;
  static char *__pyx_argnames[] = {0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "", __pyx_argnames)) return 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":341 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 341; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 341; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 341; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":342 */
  __pyx_4 = est_db_sync(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb);
  if (__pyx_4) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":343 */
    __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_True); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 343; goto __pyx_L1;}
    __pyx_r = __pyx_1;
    __pyx_1 = 0;
    goto __pyx_L0;
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":344 */
  __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_DBSyncError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 344; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 344; goto __pyx_L1;}
  Py_INCREF(__pyx_k33p);
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_k33p);
  __pyx_1 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 344; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __Pyx_Raise(__pyx_1, 0, 0);
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  {__pyx_filename = __pyx_f[0]; __pyx_lineno = 344; goto __pyx_L1;}

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.sync");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_k34p;

static char (__pyx_k34[]) = "Wasn't able to optimize the database.";

static PyObject *__pyx_f_5_hype_8Database_optimize(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_optimize(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  int __pyx_v_options;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  int __pyx_4;
  static char *__pyx_argnames[] = {"options",0};
  __pyx_v_options = __pyx_k18;
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "|i", __pyx_argnames, &__pyx_v_options)) return 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":347 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 347; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 347; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 347; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":348 */
  __pyx_4 = est_db_optimize(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb,__pyx_v_options);
  if (__pyx_4) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":349 */
    __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_True); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 349; goto __pyx_L1;}
    __pyx_r = __pyx_1;
    __pyx_1 = 0;
    goto __pyx_L0;
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":350 */
  __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_DBOptimizeError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 350; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 350; goto __pyx_L1;}
  Py_INCREF(__pyx_k34p);
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_k34p);
  __pyx_1 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 350; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __Pyx_Raise(__pyx_1, 0, 0);
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  {__pyx_filename = __pyx_f[0]; __pyx_lineno = 350; goto __pyx_L1;}

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.optimize");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_8Database_search(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_search(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_phrase = 0;
  PyObject *__pyx_v_simple = 0;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  static char *__pyx_argnames[] = {"phrase","simple",0};
  __pyx_v_phrase = __pyx_k19;
  __pyx_v_simple = __pyx_k20;
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "|OO", __pyx_argnames, &__pyx_v_phrase, &__pyx_v_simple)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_phrase);
  Py_INCREF(__pyx_v_simple);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":353 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 353; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 353; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 353; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":354 */
  __pyx_1 = PyTuple_New(3); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 354; goto __pyx_L1;}
  Py_INCREF(__pyx_v_self);
  PyTuple_SET_ITEM(__pyx_1, 0, __pyx_v_self);
  Py_INCREF(__pyx_v_phrase);
  PyTuple_SET_ITEM(__pyx_1, 1, __pyx_v_phrase);
  Py_INCREF(__pyx_v_simple);
  PyTuple_SET_ITEM(__pyx_1, 2, __pyx_v_simple);
  __pyx_2 = PyObject_CallObject(((PyObject*)__pyx_ptype_5_hype_Search), __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 354; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  __pyx_r = __pyx_2;
  __pyx_2 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.search");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_phrase);
  Py_DECREF(__pyx_v_simple);
  return __pyx_r;
}

static PyObject *__pyx_k35p;

static char (__pyx_k35[]) = "Error while editing an object";

static PyObject *__pyx_f_5_hype_8Database_commit(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_commit(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_5_hype_Document *__pyx_v_doc = 0;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  int __pyx_4;
  static char *__pyx_argnames[] = {"doc",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_doc)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_doc);
  if (!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_doc), __pyx_ptype_5_hype_Document, 1, "doc")) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 356; goto __pyx_L1;}

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":357 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 357; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 357; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 357; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":358 */
  __pyx_4 = est_db_edit_doc(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb,__pyx_v_doc->estdoc);
  if (__pyx_4) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":359 */
    __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_True); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 359; goto __pyx_L1;}
    __pyx_r = __pyx_1;
    __pyx_1 = 0;
    goto __pyx_L0;
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":360 */
  __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_DBEditError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 360; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 360; goto __pyx_L1;}
  Py_INCREF(__pyx_k35p);
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_k35p);
  __pyx_1 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 360; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __Pyx_Raise(__pyx_1, 0, 0);
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  {__pyx_filename = __pyx_f[0]; __pyx_lineno = 360; goto __pyx_L1;}

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.commit");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_doc);
  return __pyx_r;
}

static PyObject *__pyx_n_id;

static PyObject *__pyx_k36p;

static char (__pyx_k36[]) = "Error while removing an object";

static PyObject *__pyx_f_5_hype_8Database_remove(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyObject *__pyx_f_5_hype_8Database_remove(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  struct __pyx_obj_5_hype_Document *__pyx_v_doc = 0;
  int __pyx_v_options;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  int __pyx_4;
  int __pyx_5;
  static char *__pyx_argnames[] = {"doc","options",0};
  __pyx_v_options = __pyx_k21;
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O|i", __pyx_argnames, &__pyx_v_doc, &__pyx_v_options)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_doc);
  if (!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_doc), __pyx_ptype_5_hype_Document, 1, "doc")) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 362; goto __pyx_L1;}

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":363 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n__check); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 363; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 363; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 363; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":364 */
  __pyx_1 = PyObject_GetAttr(((PyObject *)__pyx_v_doc), __pyx_n_id); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 364; goto __pyx_L1;}
  __pyx_4 = PyInt_AsLong(__pyx_1); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 364; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  __pyx_5 = est_db_out_doc(((struct __pyx_obj_5_hype_Database *)__pyx_v_self)->estdb,__pyx_4,__pyx_v_options);
  if (__pyx_5) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":365 */
    __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_True); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 365; goto __pyx_L1;}
    __pyx_r = __pyx_2;
    __pyx_2 = 0;
    goto __pyx_L0;
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":366 */
  __pyx_3 = __Pyx_GetName(__pyx_m, __pyx_n_DBRemoveError); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 366; goto __pyx_L1;}
  __pyx_1 = PyTuple_New(1); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 366; goto __pyx_L1;}
  Py_INCREF(__pyx_k36p);
  PyTuple_SET_ITEM(__pyx_1, 0, __pyx_k36p);
  __pyx_2 = PyObject_CallObject(__pyx_3, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 366; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  __Pyx_Raise(__pyx_2, 0, 0);
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  {__pyx_filename = __pyx_f[0]; __pyx_lineno = 366; goto __pyx_L1;}

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Database.remove");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_doc);
  return __pyx_r;
}

static PyObject *__pyx_n_set_phrase;
static PyObject *__pyx_n_set_options;

static int __pyx_f_5_hype_6Search___new__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static int __pyx_f_5_hype_6Search___new__(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_database = 0;
  PyObject *__pyx_v_phrase = 0;
  PyObject *__pyx_v_simple = 0;
  int __pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  int __pyx_3;
  PyObject *__pyx_4 = 0;
  static char *__pyx_argnames[] = {"database","phrase","simple",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "OOO", __pyx_argnames, &__pyx_v_database, &__pyx_v_phrase, &__pyx_v_simple)) return -1;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_database);
  Py_INCREF(__pyx_v_phrase);
  Py_INCREF(__pyx_v_simple);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":388 */
  if (!__Pyx_TypeTest(__pyx_v_database, __pyx_ptype_5_hype_Database)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 388; goto __pyx_L1;}
  Py_INCREF(__pyx_v_database);
  Py_DECREF(((PyObject *)((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->database));
  ((PyObject *)((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->database) = __pyx_v_database;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":389 */
  __pyx_1 = PyTuple_New(0); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 389; goto __pyx_L1;}
  __pyx_2 = PyObject_CallObject(((PyObject*)__pyx_ptype_5_hype_Condition), __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 389; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  if (!__Pyx_TypeTest(__pyx_2, __pyx_ptype_5_hype_Condition)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 389; goto __pyx_L1;}
  Py_DECREF(((PyObject *)((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->condition));
  ((PyObject *)((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->condition) = __pyx_2;
  __pyx_2 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":390 */
  __pyx_3 = __pyx_v_phrase != Py_None;
  if (__pyx_3) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":391 */
    __pyx_1 = PyObject_GetAttr(((PyObject *)((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->condition), __pyx_n_set_phrase); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 391; goto __pyx_L1;}
    __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 391; goto __pyx_L1;}
    Py_INCREF(__pyx_v_phrase);
    PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_phrase);
    __pyx_4 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 391; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":392 */
  __pyx_3 = PyObject_IsTrue(__pyx_v_simple); if (__pyx_3 < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 392; goto __pyx_L1;}
  if (__pyx_3) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":393 */
    __pyx_1 = PyObject_GetAttr(((PyObject *)((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->condition), __pyx_n_set_options); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 393; goto __pyx_L1;}
    __pyx_2 = PyInt_FromLong(ESTCONDSIMPLE); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 393; goto __pyx_L1;}
    __pyx_4 = PyTuple_New(1); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 393; goto __pyx_L1;}
    PyTuple_SET_ITEM(__pyx_4, 0, __pyx_2);
    __pyx_2 = 0;
    __pyx_2 = PyObject_CallObject(__pyx_1, __pyx_4); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 393; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    goto __pyx_L3;
  }
  __pyx_L3:;

  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_4);
  __Pyx_AddTraceback("_hype.Search.__new__");
  __pyx_r = -1;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_database);
  Py_DECREF(__pyx_v_phrase);
  Py_DECREF(__pyx_v_simple);
  return __pyx_r;
}

static void __pyx_f_5_hype_6Search___dealloc__(PyObject *__pyx_v_self); /*proto*/
static void __pyx_f_5_hype_6Search___dealloc__(PyObject *__pyx_v_self) {
  int __pyx_1;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":396 */
  __pyx_1 = (((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->results != 0);
  if (__pyx_1) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":397 */
    free(((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->results);

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":398 */
    ((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->results = 0;
    goto __pyx_L2;
  }
  __pyx_L2:;

  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.Search.__dealloc__");
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
}

static PyObject *__pyx_n_set_max;

static PyObject *__pyx_f_5_hype_6Search_max(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5_hype_6Search_max[] = "\n        Set the maximum number of documents returned by the search.\n        ";
static PyObject *__pyx_f_5_hype_6Search_max(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_max = 0;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  static char *__pyx_argnames[] = {"max",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_max)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_max);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":404 */
  __pyx_1 = PyObject_GetAttr(((PyObject *)((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->condition), __pyx_n_set_max); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 404; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 404; goto __pyx_L1;}
  Py_INCREF(__pyx_v_max);
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_max);
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 404; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":405 */
  Py_INCREF(__pyx_v_self);
  __pyx_r = __pyx_v_self;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Search.max");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_max);
  return __pyx_r;
}

static PyObject *__pyx_n_add_attr;

static PyObject *__pyx_f_5_hype_6Search_add(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5_hype_6Search_add[] = "\n        Add an attribute expression.\n        ";
static PyObject *__pyx_f_5_hype_6Search_add(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_expr = 0;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  static char *__pyx_argnames[] = {"expr",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_expr)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_expr);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":411 */
  __pyx_1 = PyObject_GetAttr(((PyObject *)((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->condition), __pyx_n_add_attr); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 411; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 411; goto __pyx_L1;}
  Py_INCREF(__pyx_v_expr);
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_expr);
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 411; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":412 */
  Py_INCREF(__pyx_v_self);
  __pyx_r = __pyx_v_self;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Search.add");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_expr);
  return __pyx_r;
}

static PyObject *__pyx_n_set_order;

static PyObject *__pyx_f_5_hype_6Search_order(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5_hype_6Search_order[] = "\n        Set the ordering expression.\n        ";
static PyObject *__pyx_f_5_hype_6Search_order(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_expr = 0;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  static char *__pyx_argnames[] = {"expr",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_expr)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_expr);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":418 */
  __pyx_1 = PyObject_GetAttr(((PyObject *)((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->condition), __pyx_n_set_order); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 418; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 418; goto __pyx_L1;}
  Py_INCREF(__pyx_v_expr);
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_expr);
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 418; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":419 */
  Py_INCREF(__pyx_v_self);
  __pyx_r = __pyx_v_self;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Search.order");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_expr);
  return __pyx_r;
}

static PyObject *__pyx_n_prepare;
static PyObject *__pyx_n_isinstance;
static PyObject *__pyx_n_slice;
static PyObject *__pyx_n_indices;
static PyObject *__pyx_n_doc_at;

static PyObject *__pyx_f_5_hype_6Search___getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_s); /*proto*/
static char __pyx_doc_5_hype_6Search___getitem__[] = "\n        Return an item or slice of the results as one or a sequence of\n        Document instances.\n        ";
static PyObject *__pyx_f_5_hype_6Search___getitem__(PyObject *__pyx_v_self, PyObject *__pyx_v_s) {
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  int __pyx_4;
  PyObject *__pyx_5 = 0;
  PyObject *__pyx_6 = 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_s);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":426 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_prepare); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 426; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 426; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 426; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":427 */
  __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_isinstance); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 427; goto __pyx_L1;}
  __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_slice); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 427; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 427; goto __pyx_L1;}
  Py_INCREF(__pyx_v_s);
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_v_s);
  PyTuple_SET_ITEM(__pyx_3, 1, __pyx_2);
  __pyx_2 = 0;
  __pyx_2 = PyObject_CallObject(__pyx_1, __pyx_3); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 427; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  __pyx_4 = PyObject_IsTrue(__pyx_2); if (__pyx_4 < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 427; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  if (__pyx_4) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":428 */
    __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n_SearchIterator); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 428; goto __pyx_L1;}
    __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 428; goto __pyx_L1;}
    Py_INCREF(__pyx_v_self);
    PyTuple_SET_ITEM(__pyx_3, 0, __pyx_v_self);
    __pyx_2 = PyObject_GetAttr(__pyx_v_s, __pyx_n_indices); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 428; goto __pyx_L1;}
    __pyx_5 = PyInt_FromLong(((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->results_len); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 428; goto __pyx_L1;}
    __pyx_6 = PyTuple_New(1); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 428; goto __pyx_L1;}
    PyTuple_SET_ITEM(__pyx_6, 0, __pyx_5);
    __pyx_5 = 0;
    __pyx_5 = PyObject_CallObject(__pyx_2, __pyx_6); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 428; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_6); __pyx_6 = 0;
    __pyx_2 = PySequence_Tuple(__pyx_5); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 428; goto __pyx_L1;}
    Py_DECREF(__pyx_5); __pyx_5 = 0;
    __pyx_6 = PyNumber_Add(__pyx_3, __pyx_2); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 428; goto __pyx_L1;}
    Py_DECREF(__pyx_3); __pyx_3 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __pyx_5 = PyObject_CallObject(__pyx_1, __pyx_6); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 428; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_6); __pyx_6 = 0;
    __pyx_r = __pyx_5;
    __pyx_5 = 0;
    goto __pyx_L0;
    goto __pyx_L2;
  }
  /*else*/ {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":430 */
    __pyx_3 = PyObject_GetAttr(__pyx_v_self, __pyx_n_doc_at); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 430; goto __pyx_L1;}
    __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 430; goto __pyx_L1;}
    Py_INCREF(__pyx_v_s);
    PyTuple_SET_ITEM(__pyx_2, 0, __pyx_v_s);
    __pyx_1 = PyObject_CallObject(__pyx_3, __pyx_2); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 430; goto __pyx_L1;}
    Py_DECREF(__pyx_3); __pyx_3 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __pyx_r = __pyx_1;
    __pyx_1 = 0;
    goto __pyx_L0;
  }
  __pyx_L2:;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  Py_XDECREF(__pyx_5);
  Py_XDECREF(__pyx_6);
  __Pyx_AddTraceback("_hype.Search.__getitem__");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_s);
  return __pyx_r;
}

static int __pyx_f_5_hype_6Search___len__(PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_5_hype_6Search___len__[] = "\n        Return the number of documents found by the search.\n        ";
static int __pyx_f_5_hype_6Search___len__(PyObject *__pyx_v_self) {
  int __pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":436 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_prepare); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 436; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 436; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 436; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":437 */
  __pyx_r = ((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->results_len;
  goto __pyx_L0;

  __pyx_r = 0;
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  __Pyx_AddTraceback("_hype.Search.__len__");
  __pyx_r = -1;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_6Search___iter__(PyObject *__pyx_v_self); /*proto*/
static char __pyx_doc_5_hype_6Search___iter__[] = "\n        Support the iterator protocol.\n        ";
static PyObject *__pyx_f_5_hype_6Search___iter__(PyObject *__pyx_v_self) {
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  PyObject *__pyx_4 = 0;
  PyObject *__pyx_5 = 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":443 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_prepare); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 443; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 443; goto __pyx_L1;}
  __pyx_3 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 443; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":444 */
  __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n_SearchIterator); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 444; goto __pyx_L1;}
  __pyx_2 = PyInt_FromLong(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 444; goto __pyx_L1;}
  __pyx_3 = PyInt_FromLong(((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->results_len); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 444; goto __pyx_L1;}
  __pyx_4 = PyInt_FromLong(1); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 444; goto __pyx_L1;}
  __pyx_5 = PyTuple_New(4); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 444; goto __pyx_L1;}
  Py_INCREF(__pyx_v_self);
  PyTuple_SET_ITEM(__pyx_5, 0, __pyx_v_self);
  PyTuple_SET_ITEM(__pyx_5, 1, __pyx_2);
  PyTuple_SET_ITEM(__pyx_5, 2, __pyx_3);
  PyTuple_SET_ITEM(__pyx_5, 3, __pyx_4);
  __pyx_2 = 0;
  __pyx_3 = 0;
  __pyx_4 = 0;
  __pyx_2 = PyObject_CallObject(__pyx_1, __pyx_5); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 444; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_5); __pyx_5 = 0;
  __pyx_r = __pyx_2;
  __pyx_2 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  Py_XDECREF(__pyx_4);
  Py_XDECREF(__pyx_5);
  __Pyx_AddTraceback("_hype.Search.__iter__");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_6Search_prepare(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5_hype_6Search_prepare[] = "\n        Prepare the finder for returning results. This executes the search if\n        necessary and initialises any attributes needed to support further\n        calls.\n        ";
static PyObject *__pyx_f_5_hype_6Search_prepare(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_r;
  int __pyx_1;
  static char *__pyx_argnames[] = {0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "", __pyx_argnames)) return 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":452 */
  __pyx_1 = (((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->results == 0);
  if (__pyx_1) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":453 */
    ((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->results = est_db_search(((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->database->estdb,((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->condition->estcond,(&((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->results_len),0);
    goto __pyx_L2;
  }
  __pyx_L2:;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.Search.prepare");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_n_IndexError;

static PyObject *__pyx_f_5_hype_6Search_doc_at(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_5_hype_6Search_doc_at[] = "\n        Return the document at the given index position.\n        ";
static PyObject *__pyx_f_5_hype_6Search_doc_at(PyObject *__pyx_v_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_pos = 0;
  PyObject *__pyx_v_docid;
  PyObject *__pyx_r;
  int __pyx_1;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  PyObject *__pyx_4 = 0;
  static char *__pyx_argnames[] = {"pos",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_pos)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_pos);
  __pyx_v_docid = Py_None; Py_INCREF(__pyx_v_docid);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":463 */
  __pyx_2 = PyInt_FromLong(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 463; goto __pyx_L1;}
  if (PyObject_Cmp(__pyx_v_pos, __pyx_2, &__pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 463; goto __pyx_L1;}
  __pyx_1 = __pyx_1 < 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  if (!__pyx_1) {
    __pyx_2 = PyInt_FromLong(((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->results_len); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 463; goto __pyx_L1;}
    if (PyObject_Cmp(__pyx_v_pos, __pyx_2, &__pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 463; goto __pyx_L1;}
    __pyx_1 = __pyx_1 >= 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
  }
  if (__pyx_1) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":464 */
    __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_IndexError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 464; goto __pyx_L1;}
    __pyx_3 = PyTuple_New(0); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 464; goto __pyx_L1;}
    __pyx_4 = PyObject_CallObject(__pyx_2, __pyx_3); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 464; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_3); __pyx_3 = 0;
    __Pyx_Raise(__pyx_4, 0, 0);
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 464; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":465 */
  __pyx_1 = PyInt_AsLong(__pyx_v_pos); if (PyErr_Occurred()) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 465; goto __pyx_L1;}
  __pyx_2 = PyInt_FromLong((((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->results[__pyx_1])); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 465; goto __pyx_L1;}
  Py_DECREF(__pyx_v_docid);
  __pyx_v_docid = __pyx_2;
  __pyx_2 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":466 */
  __pyx_3 = PyObject_GetAttr(((PyObject *)((struct __pyx_obj_5_hype_Search *)__pyx_v_self)->database), __pyx_n_get_doc); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 466; goto __pyx_L1;}
  __pyx_4 = PyTuple_New(1); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 466; goto __pyx_L1;}
  Py_INCREF(__pyx_v_docid);
  PyTuple_SET_ITEM(__pyx_4, 0, __pyx_v_docid);
  __pyx_2 = PyObject_CallObject(__pyx_3, __pyx_4); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 466; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  __pyx_r = __pyx_2;
  __pyx_2 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  Py_XDECREF(__pyx_4);
  __Pyx_AddTraceback("_hype.Search.doc_at");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_docid);
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_pos);
  return __pyx_r;
}

static PyObject *__pyx_n_search;
static PyObject *__pyx_n_start;
static PyObject *__pyx_n_stop;
static PyObject *__pyx_n_stride;
static PyObject *__pyx_n_current;

static PyObject *__pyx_f_5_hype_14SearchIterator___init__(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_5_hype_14SearchIterator___init__ = {"__init__", (PyCFunction)__pyx_f_5_hype_14SearchIterator___init__, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_f_5_hype_14SearchIterator___init__(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_self = 0;
  struct __pyx_obj_5_hype_Search *__pyx_v_search = 0;
  PyObject *__pyx_v_start = 0;
  PyObject *__pyx_v_stop = 0;
  PyObject *__pyx_v_stride = 0;
  PyObject *__pyx_r;
  static char *__pyx_argnames[] = {"self","search","start","stop","stride",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "OOOOO", __pyx_argnames, &__pyx_v_self, &__pyx_v_search, &__pyx_v_start, &__pyx_v_stop, &__pyx_v_stride)) return 0;
  Py_INCREF(__pyx_v_self);
  Py_INCREF(__pyx_v_search);
  Py_INCREF(__pyx_v_start);
  Py_INCREF(__pyx_v_stop);
  Py_INCREF(__pyx_v_stride);
  if (!__Pyx_ArgTypeTest(((PyObject *)__pyx_v_search), __pyx_ptype_5_hype_Search, 1, "search")) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 470; goto __pyx_L1;}

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":471 */
  if (PyObject_SetAttr(__pyx_v_self, __pyx_n_search, ((PyObject *)__pyx_v_search)) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 471; goto __pyx_L1;}

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":472 */
  if (PyObject_SetAttr(__pyx_v_self, __pyx_n_start, __pyx_v_start) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 472; goto __pyx_L1;}

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":473 */
  if (PyObject_SetAttr(__pyx_v_self, __pyx_n_stop, __pyx_v_stop) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 473; goto __pyx_L1;}

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":474 */
  if (PyObject_SetAttr(__pyx_v_self, __pyx_n_stride, __pyx_v_stride) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 474; goto __pyx_L1;}

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":475 */
  if (PyObject_SetAttr(__pyx_v_self, __pyx_n_current, __pyx_v_start) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 475; goto __pyx_L1;}

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.SearchIterator.__init__");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  Py_DECREF(__pyx_v_search);
  Py_DECREF(__pyx_v_start);
  Py_DECREF(__pyx_v_stop);
  Py_DECREF(__pyx_v_stride);
  return __pyx_r;
}

static PyObject *__pyx_f_5_hype_14SearchIterator___iter__(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_5_hype_14SearchIterator___iter__ = {"__iter__", (PyCFunction)__pyx_f_5_hype_14SearchIterator___iter__, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_f_5_hype_14SearchIterator___iter__(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_self = 0;
  PyObject *__pyx_r;
  static char *__pyx_argnames[] = {"self",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_self)) return 0;
  Py_INCREF(__pyx_v_self);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":478 */
  Py_INCREF(__pyx_v_self);
  __pyx_r = __pyx_v_self;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  __Pyx_AddTraceback("_hype.SearchIterator.__iter__");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static PyObject *__pyx_n_StopIteration;

static PyObject *__pyx_f_5_hype_14SearchIterator_next(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static PyMethodDef __pyx_mdef_5_hype_14SearchIterator_next = {"next", (PyCFunction)__pyx_f_5_hype_14SearchIterator_next, METH_VARARGS|METH_KEYWORDS, 0};
static PyObject *__pyx_f_5_hype_14SearchIterator_next(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyObject *__pyx_v_self = 0;
  PyObject *__pyx_v_doc;
  PyObject *__pyx_r;
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  int __pyx_3;
  PyObject *__pyx_4 = 0;
  static char *__pyx_argnames[] = {"self",0};
  if (!PyArg_ParseTupleAndKeywords(__pyx_args, __pyx_kwds, "O", __pyx_argnames, &__pyx_v_self)) return 0;
  Py_INCREF(__pyx_v_self);
  __pyx_v_doc = Py_None; Py_INCREF(__pyx_v_doc);

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":482 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_start); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 482; goto __pyx_L1;}
  __pyx_2 = PyObject_GetAttr(__pyx_v_self, __pyx_n_stop); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 482; goto __pyx_L1;}
  if (PyObject_Cmp(__pyx_1, __pyx_2, &__pyx_3) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 482; goto __pyx_L1;}
  __pyx_3 = __pyx_3 == 0;
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  if (__pyx_3) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":483 */
    __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_StopIteration); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 483; goto __pyx_L1;}
    __pyx_2 = PyTuple_New(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 483; goto __pyx_L1;}
    __pyx_4 = PyObject_CallObject(__pyx_1, __pyx_2); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 483; goto __pyx_L1;}
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    __Pyx_Raise(__pyx_4, 0, 0);
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 483; goto __pyx_L1;}
    goto __pyx_L2;
  }
  __pyx_L2:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":485 */
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_stop); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; goto __pyx_L1;}
  __pyx_2 = PyObject_GetAttr(__pyx_v_self, __pyx_n_start); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; goto __pyx_L1;}
  if (PyObject_Cmp(__pyx_1, __pyx_2, &__pyx_3) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; goto __pyx_L1;}
  __pyx_3 = __pyx_3 > 0;
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  if (__pyx_3) {
    __pyx_4 = PyObject_GetAttr(__pyx_v_self, __pyx_n_stride); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; goto __pyx_L1;}
    __pyx_1 = PyInt_FromLong(0); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; goto __pyx_L1;}
    if (PyObject_Cmp(__pyx_4, __pyx_1, &__pyx_3) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; goto __pyx_L1;}
    __pyx_3 = __pyx_3 < 0;
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    Py_DECREF(__pyx_1); __pyx_1 = 0;
  }
  if (!__pyx_3) {
    __pyx_2 = PyObject_GetAttr(__pyx_v_self, __pyx_n_stop); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; goto __pyx_L1;}
    __pyx_4 = PyObject_GetAttr(__pyx_v_self, __pyx_n_start); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; goto __pyx_L1;}
    if (PyObject_Cmp(__pyx_2, __pyx_4, &__pyx_3) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; goto __pyx_L1;}
    __pyx_3 = __pyx_3 < 0;
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    if (__pyx_3) {
      __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_stride); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; goto __pyx_L1;}
      __pyx_2 = PyInt_FromLong(0); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; goto __pyx_L1;}
      if (PyObject_Cmp(__pyx_1, __pyx_2, &__pyx_3) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 485; goto __pyx_L1;}
      __pyx_3 = __pyx_3 > 0;
      Py_DECREF(__pyx_1); __pyx_1 = 0;
      Py_DECREF(__pyx_2); __pyx_2 = 0;
    }
  }
  if (__pyx_3) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":486 */
    __pyx_4 = __Pyx_GetName(__pyx_b, __pyx_n_StopIteration); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 486; goto __pyx_L1;}
    __pyx_1 = PyTuple_New(0); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 486; goto __pyx_L1;}
    __pyx_2 = PyObject_CallObject(__pyx_4, __pyx_1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 486; goto __pyx_L1;}
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    __Pyx_Raise(__pyx_2, 0, 0);
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 486; goto __pyx_L1;}
    goto __pyx_L3;
  }
  __pyx_L3:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":488 */
  __pyx_4 = PyObject_GetAttr(__pyx_v_self, __pyx_n_current); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 488; goto __pyx_L1;}
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_stop); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 488; goto __pyx_L1;}
  if (PyObject_Cmp(__pyx_4, __pyx_1, &__pyx_3) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 488; goto __pyx_L1;}
  __pyx_3 = __pyx_3 == 0;
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  if (__pyx_3) {

    /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":489 */
    __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_StopIteration); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 489; goto __pyx_L1;}
    __pyx_4 = PyTuple_New(0); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 489; goto __pyx_L1;}
    __pyx_1 = PyObject_CallObject(__pyx_2, __pyx_4); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 489; goto __pyx_L1;}
    Py_DECREF(__pyx_2); __pyx_2 = 0;
    Py_DECREF(__pyx_4); __pyx_4 = 0;
    __Pyx_Raise(__pyx_1, 0, 0);
    Py_DECREF(__pyx_1); __pyx_1 = 0;
    {__pyx_filename = __pyx_f[0]; __pyx_lineno = 489; goto __pyx_L1;}
    goto __pyx_L4;
  }
  __pyx_L4:;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":490 */
  __pyx_2 = PyObject_GetAttr(__pyx_v_self, __pyx_n_search); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 490; goto __pyx_L1;}
  __pyx_4 = PyObject_GetAttr(__pyx_2, __pyx_n_doc_at); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 490; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  __pyx_1 = PyObject_GetAttr(__pyx_v_self, __pyx_n_current); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 490; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 490; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
  __pyx_1 = 0;
  __pyx_1 = PyObject_CallObject(__pyx_4, __pyx_2); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 490; goto __pyx_L1;}
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_v_doc);
  __pyx_v_doc = __pyx_1;
  __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":491 */
  __pyx_4 = PyObject_GetAttr(__pyx_v_self, __pyx_n_current); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 491; goto __pyx_L1;}
  __pyx_2 = PyObject_GetAttr(__pyx_v_self, __pyx_n_stride); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 491; goto __pyx_L1;}
  __pyx_1 = PyNumber_Add(__pyx_4, __pyx_2); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 491; goto __pyx_L1;}
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  if (PyObject_SetAttr(__pyx_v_self, __pyx_n_current, __pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 491; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":492 */
  Py_INCREF(__pyx_v_doc);
  __pyx_r = __pyx_v_doc;
  goto __pyx_L0;

  __pyx_r = Py_None; Py_INCREF(__pyx_r);
  goto __pyx_L0;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_4);
  __Pyx_AddTraceback("_hype.SearchIterator.next");
  __pyx_r = 0;
  __pyx_L0:;
  Py_DECREF(__pyx_v_doc);
  Py_DECREF(__pyx_v_self);
  return __pyx_r;
}

static __Pyx_InternTabEntry __pyx_intern_tab[] = {
  {&__pyx_n_DBEditError, "DBEditError"},
  {&__pyx_n_DBError, "DBError"},
  {&__pyx_n_DBFlushError, "DBFlushError"},
  {&__pyx_n_DBOptimizeError, "DBOptimizeError"},
  {&__pyx_n_DBRemoveError, "DBRemoveError"},
  {&__pyx_n_DBSyncError, "DBSyncError"},
  {&__pyx_n_DocModifyImmutableError, "DocModifyImmutableError"},
  {&__pyx_n_DocNeverAddedError, "DocNeverAddedError"},
  {&__pyx_n_DocumentError, "DocumentError"},
  {&__pyx_n_Exception, "Exception"},
  {&__pyx_n_False, "False"},
  {&__pyx_n_HyperEstraierError, "HyperEstraierError"},
  {&__pyx_n_HyperEstraierException, "HyperEstraierException"},
  {&__pyx_n_IndexError, "IndexError"},
  {&__pyx_n_KeyError, "KeyError"},
  {&__pyx_n_SearchIterator, "SearchIterator"},
  {&__pyx_n_StopIteration, "StopIteration"},
  {&__pyx_n_True, "True"},
  {&__pyx_n___init__, "__init__"},
  {&__pyx_n___iter__, "__iter__"},
  {&__pyx_n__check, "_check"},
  {&__pyx_n_add_attr, "add_attr"},
  {&__pyx_n_append, "append"},
  {&__pyx_n_bool, "bool"},
  {&__pyx_n_commit, "commit"},
  {&__pyx_n_current, "current"},
  {&__pyx_n_doc_at, "doc_at"},
  {&__pyx_n_doc_from_string, "doc_from_string"},
  {&__pyx_n_get, "get"},
  {&__pyx_n_get_doc, "get_doc"},
  {&__pyx_n_id, "id"},
  {&__pyx_n_indices, "indices"},
  {&__pyx_n_isinstance, "isinstance"},
  {&__pyx_n_next, "next"},
  {&__pyx_n_object, "object"},
  {&__pyx_n_prepare, "prepare"},
  {&__pyx_n_remove, "remove"},
  {&__pyx_n_search, "search"},
  {&__pyx_n_set_max, "set_max"},
  {&__pyx_n_set_options, "set_options"},
  {&__pyx_n_set_order, "set_order"},
  {&__pyx_n_set_phrase, "set_phrase"},
  {&__pyx_n_slice, "slice"},
  {&__pyx_n_start, "start"},
  {&__pyx_n_stop, "stop"},
  {&__pyx_n_stride, "stride"},
  {0, 0}
};

static __Pyx_StringTabEntry __pyx_string_tab[] = {
  {&__pyx_k24p, __pyx_k24, sizeof(__pyx_k24)},
  {&__pyx_k25p, __pyx_k25, sizeof(__pyx_k25)},
  {&__pyx_k26p, __pyx_k26, sizeof(__pyx_k26)},
  {&__pyx_k27p, __pyx_k27, sizeof(__pyx_k27)},
  {&__pyx_k28p, __pyx_k28, sizeof(__pyx_k28)},
  {&__pyx_k29p, __pyx_k29, sizeof(__pyx_k29)},
  {&__pyx_k30p, __pyx_k30, sizeof(__pyx_k30)},
  {&__pyx_k31p, __pyx_k31, sizeof(__pyx_k31)},
  {&__pyx_k32p, __pyx_k32, sizeof(__pyx_k32)},
  {&__pyx_k33p, __pyx_k33, sizeof(__pyx_k33)},
  {&__pyx_k34p, __pyx_k34, sizeof(__pyx_k34)},
  {&__pyx_k35p, __pyx_k35, sizeof(__pyx_k35)},
  {&__pyx_k36p, __pyx_k36, sizeof(__pyx_k36)},
  {0, 0, 0}
};

static PyObject *__pyx_tp_new_5_hype_Database(PyTypeObject *t, PyObject *a, PyObject *k) {
  PyObject *o = (*t->tp_alloc)(t, 0);
  struct __pyx_obj_5_hype_Database *p = (struct __pyx_obj_5_hype_Database *)o;
  if (__pyx_f_5_hype_8Database___new__(o, a, k) < 0) {
    Py_DECREF(o); o = 0;
  }
  return o;
}

static void __pyx_tp_dealloc_5_hype_Database(PyObject *o) {
  struct __pyx_obj_5_hype_Database *p = (struct __pyx_obj_5_hype_Database *)o;
  (*o->ob_type->tp_free)(o);
}

static int __pyx_tp_traverse_5_hype_Database(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_5_hype_Database *p = (struct __pyx_obj_5_hype_Database *)o;
  return 0;
}

static int __pyx_tp_clear_5_hype_Database(PyObject *o) {
  struct __pyx_obj_5_hype_Database *p = (struct __pyx_obj_5_hype_Database *)o;
  return 0;
}

static PyObject *__pyx_getprop_5_hype_8Database_name(PyObject *o, void *x) {
  return __pyx_f_5_hype_8Database_4name___get__(o);
}

static PyObject *__pyx_getprop_5_hype_8Database_size(PyObject *o, void *x) {
  return __pyx_f_5_hype_8Database_4size___get__(o);
}

static PyObject *__pyx_getprop_5_hype_8Database_ecode(PyObject *o, void *x) {
  return __pyx_f_5_hype_8Database_5ecode___get__(o);
}

static PyObject *__pyx_getprop_5_hype_8Database_efatal(PyObject *o, void *x) {
  return __pyx_f_5_hype_8Database_6efatal___get__(o);
}

static struct PyMethodDef __pyx_methods_5_hype_Database[] = {
  {"close", (PyCFunction)__pyx_f_5_hype_8Database_close, METH_VARARGS|METH_KEYWORDS, 0},
  {"_check", (PyCFunction)__pyx_f_5_hype_8Database__check, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5_hype_8Database__check},
  {"put_doc", (PyCFunction)__pyx_f_5_hype_8Database_put_doc, METH_VARARGS|METH_KEYWORDS, 0},
  {"get_doc", (PyCFunction)__pyx_f_5_hype_8Database_get_doc, METH_VARARGS|METH_KEYWORDS, 0},
  {"get_doc_by_uri", (PyCFunction)__pyx_f_5_hype_8Database_get_doc_by_uri, METH_VARARGS|METH_KEYWORDS, 0},
  {"flush", (PyCFunction)__pyx_f_5_hype_8Database_flush, METH_VARARGS|METH_KEYWORDS, 0},
  {"sync", (PyCFunction)__pyx_f_5_hype_8Database_sync, METH_VARARGS|METH_KEYWORDS, 0},
  {"optimize", (PyCFunction)__pyx_f_5_hype_8Database_optimize, METH_VARARGS|METH_KEYWORDS, 0},
  {"search", (PyCFunction)__pyx_f_5_hype_8Database_search, METH_VARARGS|METH_KEYWORDS, 0},
  {"commit", (PyCFunction)__pyx_f_5_hype_8Database_commit, METH_VARARGS|METH_KEYWORDS, 0},
  {"remove", (PyCFunction)__pyx_f_5_hype_8Database_remove, METH_VARARGS|METH_KEYWORDS, 0},
  {0, 0, 0, 0}
};

static struct PyGetSetDef __pyx_getsets_5_hype_Database[] = {
  {"name", __pyx_getprop_5_hype_8Database_name, 0, 0, 0},
  {"size", __pyx_getprop_5_hype_8Database_size, 0, 0, 0},
  {"ecode", __pyx_getprop_5_hype_8Database_ecode, 0, 0, 0},
  {"efatal", __pyx_getprop_5_hype_8Database_efatal, 0, 0, 0},
  {0, 0, 0, 0, 0}
};

static PyNumberMethods __pyx_tp_as_number_Database = {
  0, /*nb_add*/
  0, /*nb_subtract*/
  0, /*nb_multiply*/
  0, /*nb_divide*/
  0, /*nb_remainder*/
  0, /*nb_divmod*/
  0, /*nb_power*/
  0, /*nb_negative*/
  0, /*nb_positive*/
  0, /*nb_absolute*/
  0, /*nb_nonzero*/
  0, /*nb_invert*/
  0, /*nb_lshift*/
  0, /*nb_rshift*/
  0, /*nb_and*/
  0, /*nb_xor*/
  0, /*nb_or*/
  0, /*nb_coerce*/
  0, /*nb_int*/
  0, /*nb_long*/
  0, /*nb_float*/
  0, /*nb_oct*/
  0, /*nb_hex*/
  0, /*nb_inplace_add*/
  0, /*nb_inplace_subtract*/
  0, /*nb_inplace_multiply*/
  0, /*nb_inplace_divide*/
  0, /*nb_inplace_remainder*/
  0, /*nb_inplace_power*/
  0, /*nb_inplace_lshift*/
  0, /*nb_inplace_rshift*/
  0, /*nb_inplace_and*/
  0, /*nb_inplace_xor*/
  0, /*nb_inplace_or*/
  0, /*nb_floor_divide*/
  0, /*nb_true_divide*/
  0, /*nb_inplace_floor_divide*/
  0, /*nb_inplace_true_divide*/
};

static PySequenceMethods __pyx_tp_as_sequence_Database = {
  __pyx_f_5_hype_8Database___len__, /*sq_length*/
  0, /*sq_concat*/
  0, /*sq_repeat*/
  0, /*sq_item*/
  0, /*sq_slice*/
  0, /*sq_ass_item*/
  0, /*sq_ass_slice*/
  0, /*sq_contains*/
  0, /*sq_inplace_concat*/
  0, /*sq_inplace_repeat*/
};

static PyMappingMethods __pyx_tp_as_mapping_Database = {
  __pyx_f_5_hype_8Database___len__, /*mp_length*/
  0, /*mp_subscript*/
  0, /*mp_ass_subscript*/
};

static PyBufferProcs __pyx_tp_as_buffer_Database = {
  0, /*bf_getreadbuffer*/
  0, /*bf_getwritebuffer*/
  0, /*bf_getsegcount*/
  0, /*bf_getcharbuffer*/
};

statichere PyTypeObject __pyx_type_5_hype_Database = {
  PyObject_HEAD_INIT(0)
  0, /*ob_size*/
  "_hype.Database", /*tp_name*/
  sizeof(struct __pyx_obj_5_hype_Database), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_5_hype_Database, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  0, /*tp_compare*/
  0, /*tp_repr*/
  &__pyx_tp_as_number_Database, /*tp_as_number*/
  &__pyx_tp_as_sequence_Database, /*tp_as_sequence*/
  &__pyx_tp_as_mapping_Database, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  &__pyx_tp_as_buffer_Database, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_BASETYPE, /*tp_flags*/
  0, /*tp_doc*/
  __pyx_tp_traverse_5_hype_Database, /*tp_traverse*/
  __pyx_tp_clear_5_hype_Database, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  0, /*tp_iter*/
  0, /*tp_iternext*/
  __pyx_methods_5_hype_Database, /*tp_methods*/
  0, /*tp_members*/
  __pyx_getsets_5_hype_Database, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  0, /*tp_dictoffset*/
  0, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_5_hype_Database, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
};
static struct __pyx_vtabstruct_5_hype_Document __pyx_vtable_5_hype_Document;

static PyObject *__pyx_tp_new_5_hype_Document(PyTypeObject *t, PyObject *a, PyObject *k) {
  PyObject *o = (*t->tp_alloc)(t, 0);
  struct __pyx_obj_5_hype_Document *p = (struct __pyx_obj_5_hype_Document *)o;
  p->__pyx_vtab = (struct __pyx_vtabstruct_5_hype_Document *)__pyx_vtabptr_5_hype_Document;
  p->db = (void *)Py_None; Py_INCREF((PyObject *) p->db);
  return o;
}

static void __pyx_tp_dealloc_5_hype_Document(PyObject *o) {
  struct __pyx_obj_5_hype_Document *p = (struct __pyx_obj_5_hype_Document *)o;
  {
    PyObject *etype, *eval, *etb;
    PyErr_Fetch(&etype, &eval, &etb);
    ++o->ob_refcnt;
    __pyx_f_5_hype_8Document___dealloc__(o);
    if (PyErr_Occurred()) PyErr_WriteUnraisable(o);
    --o->ob_refcnt;
    PyErr_Restore(etype, eval, etb);
  }
  Py_XDECREF(p->db);
  (*o->ob_type->tp_free)(o);
}

static int __pyx_tp_traverse_5_hype_Document(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_5_hype_Document *p = (struct __pyx_obj_5_hype_Document *)o;
  if (p->db) {
    e = (*v)(((PyObject*)p->db), a); if (e) return e;
  }
  return 0;
}

static int __pyx_tp_clear_5_hype_Document(PyObject *o) {
  struct __pyx_obj_5_hype_Document *p = (struct __pyx_obj_5_hype_Document *)o;
  Py_XDECREF(p->db);
  p->db = (void *)Py_None; Py_INCREF((PyObject *) p->db);
  return 0;
}
static PyObject *__pyx_sq_item_5_hype_Document(PyObject *o, int i) {
  PyObject *r;
  PyObject *x = PyInt_FromLong(i); if(!x) return 0;
  r = o->ob_type->tp_as_mapping->mp_subscript(o, x);
  Py_DECREF(x);
  return r;
}

static int __pyx_mp_ass_subscript_5_hype_Document(PyObject *o, PyObject *i, PyObject *v) {
  if (v) {
    return __pyx_f_5_hype_8Document___setitem__(o, i, v);
  }
  else {
    PyErr_Format(PyExc_NotImplementedError,
      "Subscript deletion not supported by %s", o->ob_type->tp_name);
    return -1;
  }
}

static PyObject *__pyx_getprop_5_hype_8Document_id(PyObject *o, void *x) {
  return __pyx_f_5_hype_8Document_2id___get__(o);
}

static PyObject *__pyx_getprop_5_hype_8Document_uri(PyObject *o, void *x) {
  return __pyx_f_5_hype_8Document_3uri___get__(o);
}

static PyObject *__pyx_getprop_5_hype_8Document_attributes(PyObject *o, void *x) {
  return __pyx_f_5_hype_8Document_10attributes___get__(o);
}

static struct PyMethodDef __pyx_methods_5_hype_Document[] = {
  {"get", (PyCFunction)__pyx_f_5_hype_8Document_get, METH_VARARGS|METH_KEYWORDS, 0},
  {"add_text", (PyCFunction)__pyx_f_5_hype_8Document_add_text, METH_VARARGS|METH_KEYWORDS, 0},
  {"add_hidden_text", (PyCFunction)__pyx_f_5_hype_8Document_add_hidden_text, METH_VARARGS|METH_KEYWORDS, 0},
  {"commit", (PyCFunction)__pyx_f_5_hype_8Document_commit, METH_VARARGS|METH_KEYWORDS, 0},
  {"remove", (PyCFunction)__pyx_f_5_hype_8Document_remove, METH_VARARGS|METH_KEYWORDS, 0},
  {0, 0, 0, 0}
};

static struct PyGetSetDef __pyx_getsets_5_hype_Document[] = {
  {"id", __pyx_getprop_5_hype_8Document_id, 0, __pyx_k1, 0},
  {"uri", __pyx_getprop_5_hype_8Document_uri, 0, 0, 0},
  {"attributes", __pyx_getprop_5_hype_8Document_attributes, 0, __pyx_k2, 0},
  {0, 0, 0, 0, 0}
};

static PyNumberMethods __pyx_tp_as_number_Document = {
  0, /*nb_add*/
  0, /*nb_subtract*/
  0, /*nb_multiply*/
  0, /*nb_divide*/
  0, /*nb_remainder*/
  0, /*nb_divmod*/
  0, /*nb_power*/
  0, /*nb_negative*/
  0, /*nb_positive*/
  0, /*nb_absolute*/
  0, /*nb_nonzero*/
  0, /*nb_invert*/
  0, /*nb_lshift*/
  0, /*nb_rshift*/
  0, /*nb_and*/
  0, /*nb_xor*/
  0, /*nb_or*/
  0, /*nb_coerce*/
  0, /*nb_int*/
  0, /*nb_long*/
  0, /*nb_float*/
  0, /*nb_oct*/
  0, /*nb_hex*/
  0, /*nb_inplace_add*/
  0, /*nb_inplace_subtract*/
  0, /*nb_inplace_multiply*/
  0, /*nb_inplace_divide*/
  0, /*nb_inplace_remainder*/
  0, /*nb_inplace_power*/
  0, /*nb_inplace_lshift*/
  0, /*nb_inplace_rshift*/
  0, /*nb_inplace_and*/
  0, /*nb_inplace_xor*/
  0, /*nb_inplace_or*/
  0, /*nb_floor_divide*/
  0, /*nb_true_divide*/
  0, /*nb_inplace_floor_divide*/
  0, /*nb_inplace_true_divide*/
};

static PySequenceMethods __pyx_tp_as_sequence_Document = {
  0, /*sq_length*/
  0, /*sq_concat*/
  0, /*sq_repeat*/
  __pyx_sq_item_5_hype_Document, /*sq_item*/
  0, /*sq_slice*/
  0, /*sq_ass_item*/
  0, /*sq_ass_slice*/
  0, /*sq_contains*/
  0, /*sq_inplace_concat*/
  0, /*sq_inplace_repeat*/
};

static PyMappingMethods __pyx_tp_as_mapping_Document = {
  0, /*mp_length*/
  __pyx_f_5_hype_8Document___getitem__, /*mp_subscript*/
  __pyx_mp_ass_subscript_5_hype_Document, /*mp_ass_subscript*/
};

static PyBufferProcs __pyx_tp_as_buffer_Document = {
  0, /*bf_getreadbuffer*/
  0, /*bf_getwritebuffer*/
  0, /*bf_getsegcount*/
  0, /*bf_getcharbuffer*/
};

statichere PyTypeObject __pyx_type_5_hype_Document = {
  PyObject_HEAD_INIT(0)
  0, /*ob_size*/
  "_hype.Document", /*tp_name*/
  sizeof(struct __pyx_obj_5_hype_Document), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_5_hype_Document, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  0, /*tp_compare*/
  0, /*tp_repr*/
  &__pyx_tp_as_number_Document, /*tp_as_number*/
  &__pyx_tp_as_sequence_Document, /*tp_as_sequence*/
  &__pyx_tp_as_mapping_Document, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  &__pyx_tp_as_buffer_Document, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
  0, /*tp_doc*/
  __pyx_tp_traverse_5_hype_Document, /*tp_traverse*/
  __pyx_tp_clear_5_hype_Document, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  0, /*tp_iter*/
  0, /*tp_iternext*/
  __pyx_methods_5_hype_Document, /*tp_methods*/
  0, /*tp_members*/
  __pyx_getsets_5_hype_Document, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  0, /*tp_dictoffset*/
  0, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_5_hype_Document, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
};

static PyObject *__pyx_tp_new_5_hype_Condition(PyTypeObject *t, PyObject *a, PyObject *k) {
  PyObject *o = (*t->tp_alloc)(t, 0);
  struct __pyx_obj_5_hype_Condition *p = (struct __pyx_obj_5_hype_Condition *)o;
  if (__pyx_f_5_hype_9Condition___new__(o, a, k) < 0) {
    Py_DECREF(o); o = 0;
  }
  return o;
}

static void __pyx_tp_dealloc_5_hype_Condition(PyObject *o) {
  struct __pyx_obj_5_hype_Condition *p = (struct __pyx_obj_5_hype_Condition *)o;
  {
    PyObject *etype, *eval, *etb;
    PyErr_Fetch(&etype, &eval, &etb);
    ++o->ob_refcnt;
    __pyx_f_5_hype_9Condition___dealloc__(o);
    if (PyErr_Occurred()) PyErr_WriteUnraisable(o);
    --o->ob_refcnt;
    PyErr_Restore(etype, eval, etb);
  }
  (*o->ob_type->tp_free)(o);
}

static int __pyx_tp_traverse_5_hype_Condition(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_5_hype_Condition *p = (struct __pyx_obj_5_hype_Condition *)o;
  return 0;
}

static int __pyx_tp_clear_5_hype_Condition(PyObject *o) {
  struct __pyx_obj_5_hype_Condition *p = (struct __pyx_obj_5_hype_Condition *)o;
  return 0;
}

static struct PyMethodDef __pyx_methods_5_hype_Condition[] = {
  {"set_phrase", (PyCFunction)__pyx_f_5_hype_9Condition_set_phrase, METH_VARARGS|METH_KEYWORDS, 0},
  {"add_attr", (PyCFunction)__pyx_f_5_hype_9Condition_add_attr, METH_VARARGS|METH_KEYWORDS, 0},
  {"set_order", (PyCFunction)__pyx_f_5_hype_9Condition_set_order, METH_VARARGS|METH_KEYWORDS, 0},
  {"set_max", (PyCFunction)__pyx_f_5_hype_9Condition_set_max, METH_VARARGS|METH_KEYWORDS, 0},
  {"set_options", (PyCFunction)__pyx_f_5_hype_9Condition_set_options, METH_VARARGS|METH_KEYWORDS, 0},
  {0, 0, 0, 0}
};

static PyNumberMethods __pyx_tp_as_number_Condition = {
  0, /*nb_add*/
  0, /*nb_subtract*/
  0, /*nb_multiply*/
  0, /*nb_divide*/
  0, /*nb_remainder*/
  0, /*nb_divmod*/
  0, /*nb_power*/
  0, /*nb_negative*/
  0, /*nb_positive*/
  0, /*nb_absolute*/
  0, /*nb_nonzero*/
  0, /*nb_invert*/
  0, /*nb_lshift*/
  0, /*nb_rshift*/
  0, /*nb_and*/
  0, /*nb_xor*/
  0, /*nb_or*/
  0, /*nb_coerce*/
  0, /*nb_int*/
  0, /*nb_long*/
  0, /*nb_float*/
  0, /*nb_oct*/
  0, /*nb_hex*/
  0, /*nb_inplace_add*/
  0, /*nb_inplace_subtract*/
  0, /*nb_inplace_multiply*/
  0, /*nb_inplace_divide*/
  0, /*nb_inplace_remainder*/
  0, /*nb_inplace_power*/
  0, /*nb_inplace_lshift*/
  0, /*nb_inplace_rshift*/
  0, /*nb_inplace_and*/
  0, /*nb_inplace_xor*/
  0, /*nb_inplace_or*/
  0, /*nb_floor_divide*/
  0, /*nb_true_divide*/
  0, /*nb_inplace_floor_divide*/
  0, /*nb_inplace_true_divide*/
};

static PySequenceMethods __pyx_tp_as_sequence_Condition = {
  0, /*sq_length*/
  0, /*sq_concat*/
  0, /*sq_repeat*/
  0, /*sq_item*/
  0, /*sq_slice*/
  0, /*sq_ass_item*/
  0, /*sq_ass_slice*/
  0, /*sq_contains*/
  0, /*sq_inplace_concat*/
  0, /*sq_inplace_repeat*/
};

static PyMappingMethods __pyx_tp_as_mapping_Condition = {
  0, /*mp_length*/
  0, /*mp_subscript*/
  0, /*mp_ass_subscript*/
};

static PyBufferProcs __pyx_tp_as_buffer_Condition = {
  0, /*bf_getreadbuffer*/
  0, /*bf_getwritebuffer*/
  0, /*bf_getsegcount*/
  0, /*bf_getcharbuffer*/
};

statichere PyTypeObject __pyx_type_5_hype_Condition = {
  PyObject_HEAD_INIT(0)
  0, /*ob_size*/
  "_hype.Condition", /*tp_name*/
  sizeof(struct __pyx_obj_5_hype_Condition), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_5_hype_Condition, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  0, /*tp_compare*/
  0, /*tp_repr*/
  &__pyx_tp_as_number_Condition, /*tp_as_number*/
  &__pyx_tp_as_sequence_Condition, /*tp_as_sequence*/
  &__pyx_tp_as_mapping_Condition, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  &__pyx_tp_as_buffer_Condition, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_BASETYPE, /*tp_flags*/
  0, /*tp_doc*/
  __pyx_tp_traverse_5_hype_Condition, /*tp_traverse*/
  __pyx_tp_clear_5_hype_Condition, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  0, /*tp_iter*/
  0, /*tp_iternext*/
  __pyx_methods_5_hype_Condition, /*tp_methods*/
  0, /*tp_members*/
  0, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  0, /*tp_dictoffset*/
  0, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_5_hype_Condition, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
};

static PyObject *__pyx_tp_new_5_hype_Search(PyTypeObject *t, PyObject *a, PyObject *k) {
  PyObject *o = (*t->tp_alloc)(t, 0);
  struct __pyx_obj_5_hype_Search *p = (struct __pyx_obj_5_hype_Search *)o;
  p->database = (void *)Py_None; Py_INCREF((PyObject *) p->database);
  p->condition = (void *)Py_None; Py_INCREF((PyObject *) p->condition);
  if (__pyx_f_5_hype_6Search___new__(o, a, k) < 0) {
    Py_DECREF(o); o = 0;
  }
  return o;
}

static void __pyx_tp_dealloc_5_hype_Search(PyObject *o) {
  struct __pyx_obj_5_hype_Search *p = (struct __pyx_obj_5_hype_Search *)o;
  {
    PyObject *etype, *eval, *etb;
    PyErr_Fetch(&etype, &eval, &etb);
    ++o->ob_refcnt;
    __pyx_f_5_hype_6Search___dealloc__(o);
    if (PyErr_Occurred()) PyErr_WriteUnraisable(o);
    --o->ob_refcnt;
    PyErr_Restore(etype, eval, etb);
  }
  Py_XDECREF(p->database);
  Py_XDECREF(p->condition);
  (*o->ob_type->tp_free)(o);
}

static int __pyx_tp_traverse_5_hype_Search(PyObject *o, visitproc v, void *a) {
  int e;
  struct __pyx_obj_5_hype_Search *p = (struct __pyx_obj_5_hype_Search *)o;
  if (p->database) {
    e = (*v)(((PyObject*)p->database), a); if (e) return e;
  }
  if (p->condition) {
    e = (*v)(((PyObject*)p->condition), a); if (e) return e;
  }
  return 0;
}

static int __pyx_tp_clear_5_hype_Search(PyObject *o) {
  struct __pyx_obj_5_hype_Search *p = (struct __pyx_obj_5_hype_Search *)o;
  Py_XDECREF(p->database);
  p->database = (void *)Py_None; Py_INCREF((PyObject *) p->database);
  Py_XDECREF(p->condition);
  p->condition = (void *)Py_None; Py_INCREF((PyObject *) p->condition);
  return 0;
}
static PyObject *__pyx_sq_item_5_hype_Search(PyObject *o, int i) {
  PyObject *r;
  PyObject *x = PyInt_FromLong(i); if(!x) return 0;
  r = o->ob_type->tp_as_mapping->mp_subscript(o, x);
  Py_DECREF(x);
  return r;
}

static struct PyMethodDef __pyx_methods_5_hype_Search[] = {
  {"max", (PyCFunction)__pyx_f_5_hype_6Search_max, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5_hype_6Search_max},
  {"add", (PyCFunction)__pyx_f_5_hype_6Search_add, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5_hype_6Search_add},
  {"order", (PyCFunction)__pyx_f_5_hype_6Search_order, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5_hype_6Search_order},
  {"prepare", (PyCFunction)__pyx_f_5_hype_6Search_prepare, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5_hype_6Search_prepare},
  {"doc_at", (PyCFunction)__pyx_f_5_hype_6Search_doc_at, METH_VARARGS|METH_KEYWORDS, __pyx_doc_5_hype_6Search_doc_at},
  {0, 0, 0, 0}
};

static PyNumberMethods __pyx_tp_as_number_Search = {
  0, /*nb_add*/
  0, /*nb_subtract*/
  0, /*nb_multiply*/
  0, /*nb_divide*/
  0, /*nb_remainder*/
  0, /*nb_divmod*/
  0, /*nb_power*/
  0, /*nb_negative*/
  0, /*nb_positive*/
  0, /*nb_absolute*/
  0, /*nb_nonzero*/
  0, /*nb_invert*/
  0, /*nb_lshift*/
  0, /*nb_rshift*/
  0, /*nb_and*/
  0, /*nb_xor*/
  0, /*nb_or*/
  0, /*nb_coerce*/
  0, /*nb_int*/
  0, /*nb_long*/
  0, /*nb_float*/
  0, /*nb_oct*/
  0, /*nb_hex*/
  0, /*nb_inplace_add*/
  0, /*nb_inplace_subtract*/
  0, /*nb_inplace_multiply*/
  0, /*nb_inplace_divide*/
  0, /*nb_inplace_remainder*/
  0, /*nb_inplace_power*/
  0, /*nb_inplace_lshift*/
  0, /*nb_inplace_rshift*/
  0, /*nb_inplace_and*/
  0, /*nb_inplace_xor*/
  0, /*nb_inplace_or*/
  0, /*nb_floor_divide*/
  0, /*nb_true_divide*/
  0, /*nb_inplace_floor_divide*/
  0, /*nb_inplace_true_divide*/
};

static PySequenceMethods __pyx_tp_as_sequence_Search = {
  __pyx_f_5_hype_6Search___len__, /*sq_length*/
  0, /*sq_concat*/
  0, /*sq_repeat*/
  __pyx_sq_item_5_hype_Search, /*sq_item*/
  0, /*sq_slice*/
  0, /*sq_ass_item*/
  0, /*sq_ass_slice*/
  0, /*sq_contains*/
  0, /*sq_inplace_concat*/
  0, /*sq_inplace_repeat*/
};

static PyMappingMethods __pyx_tp_as_mapping_Search = {
  __pyx_f_5_hype_6Search___len__, /*mp_length*/
  __pyx_f_5_hype_6Search___getitem__, /*mp_subscript*/
  0, /*mp_ass_subscript*/
};

static PyBufferProcs __pyx_tp_as_buffer_Search = {
  0, /*bf_getreadbuffer*/
  0, /*bf_getwritebuffer*/
  0, /*bf_getsegcount*/
  0, /*bf_getcharbuffer*/
};

statichere PyTypeObject __pyx_type_5_hype_Search = {
  PyObject_HEAD_INIT(0)
  0, /*ob_size*/
  "_hype.Search", /*tp_name*/
  sizeof(struct __pyx_obj_5_hype_Search), /*tp_basicsize*/
  0, /*tp_itemsize*/
  __pyx_tp_dealloc_5_hype_Search, /*tp_dealloc*/
  0, /*tp_print*/
  0, /*tp_getattr*/
  0, /*tp_setattr*/
  0, /*tp_compare*/
  0, /*tp_repr*/
  &__pyx_tp_as_number_Search, /*tp_as_number*/
  &__pyx_tp_as_sequence_Search, /*tp_as_sequence*/
  &__pyx_tp_as_mapping_Search, /*tp_as_mapping*/
  0, /*tp_hash*/
  0, /*tp_call*/
  0, /*tp_str*/
  0, /*tp_getattro*/
  0, /*tp_setattro*/
  &__pyx_tp_as_buffer_Search, /*tp_as_buffer*/
  Py_TPFLAGS_DEFAULT|Py_TPFLAGS_CHECKTYPES|Py_TPFLAGS_BASETYPE|Py_TPFLAGS_HAVE_GC, /*tp_flags*/
  "\n    Search provides a way to search for, order and limit indexed documents.\n\n    A Search instance is never created directly, an instance is created and\n    returned by calling database.search().\n\n    Search supports the iterator and len protocols as expected, as well as index\n    and slice __getitem__ access.\n\n    Search also provides methods to modify the set of documents returned by the\n    search.\n    ", /*tp_doc*/
  __pyx_tp_traverse_5_hype_Search, /*tp_traverse*/
  __pyx_tp_clear_5_hype_Search, /*tp_clear*/
  0, /*tp_richcompare*/
  0, /*tp_weaklistoffset*/
  __pyx_f_5_hype_6Search___iter__, /*tp_iter*/
  0, /*tp_iternext*/
  __pyx_methods_5_hype_Search, /*tp_methods*/
  0, /*tp_members*/
  0, /*tp_getset*/
  0, /*tp_base*/
  0, /*tp_dict*/
  0, /*tp_descr_get*/
  0, /*tp_descr_set*/
  0, /*tp_dictoffset*/
  0, /*tp_init*/
  0, /*tp_alloc*/
  __pyx_tp_new_5_hype_Search, /*tp_new*/
  0, /*tp_free*/
  0, /*tp_is_gc*/
  0, /*tp_bases*/
  0, /*tp_mro*/
  0, /*tp_cache*/
  0, /*tp_subclasses*/
  0, /*tp_weaklist*/
};

static struct PyMethodDef __pyx_methods[] = {
  {"doc_from_string", (PyCFunction)__pyx_f_5_hype_doc_from_string, METH_VARARGS|METH_KEYWORDS, 0},
  {0, 0, 0, 0}
};

DL_EXPORT(void) init_hype(void); /*proto*/
DL_EXPORT(void) init_hype(void) {
  PyObject *__pyx_1 = 0;
  PyObject *__pyx_2 = 0;
  PyObject *__pyx_3 = 0;
  PyObject *__pyx_4 = 0;
  PyObject *__pyx_5 = 0;
  PyObject *__pyx_6 = 0;
  __pyx_m = Py_InitModule4("_hype", __pyx_methods, 0, 0, PYTHON_API_VERSION);
  if (!__pyx_m) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; goto __pyx_L1;};
  __pyx_b = PyImport_AddModule("__builtin__");
  if (!__pyx_b) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; goto __pyx_L1;};
  if (PyObject_SetAttrString(__pyx_m, "__builtins__", __pyx_b) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; goto __pyx_L1;};
  if (__Pyx_InternStrings(__pyx_intern_tab) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; goto __pyx_L1;};
  if (__Pyx_InitStrings(__pyx_string_tab) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; goto __pyx_L1;};
  if (PyType_Ready(&__pyx_type_5_hype_Database) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 266; goto __pyx_L1;}
  if (PyObject_SetAttrString(__pyx_m, "Database", (PyObject *)&__pyx_type_5_hype_Database) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 266; goto __pyx_L1;}
  __pyx_ptype_5_hype_Database = &__pyx_type_5_hype_Database;
  __pyx_vtabptr_5_hype_Document = &__pyx_vtable_5_hype_Document;
  __pyx_vtable_5_hype_Document.init_estdoc = (void *)__pyx_f_5_hype_8Document_init_estdoc;
  __pyx_type_5_hype_Document.tp_free = _PyObject_GC_Del;
  if (PyType_Ready(&__pyx_type_5_hype_Document) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 153; goto __pyx_L1;}
  if (__Pyx_SetVtable(__pyx_type_5_hype_Document.tp_dict, __pyx_vtabptr_5_hype_Document) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 153; goto __pyx_L1;}
  if (PyObject_SetAttrString(__pyx_m, "Document", (PyObject *)&__pyx_type_5_hype_Document) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 153; goto __pyx_L1;}
  __pyx_ptype_5_hype_Document = &__pyx_type_5_hype_Document;
  if (PyType_Ready(&__pyx_type_5_hype_Condition) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 242; goto __pyx_L1;}
  if (PyObject_SetAttrString(__pyx_m, "Condition", (PyObject *)&__pyx_type_5_hype_Condition) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 242; goto __pyx_L1;}
  __pyx_ptype_5_hype_Condition = &__pyx_type_5_hype_Condition;
  __pyx_type_5_hype_Search.tp_free = _PyObject_GC_Del;
  if (PyType_Ready(&__pyx_type_5_hype_Search) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 368; goto __pyx_L1;}
  if (PyObject_SetAttrString(__pyx_m, "Search", (PyObject *)&__pyx_type_5_hype_Search) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 368; goto __pyx_L1;}
  __pyx_ptype_5_hype_Search = &__pyx_type_5_hype_Search;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":121 */
  __pyx_1 = PyDict_New(); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 121; goto __pyx_L1;}
  __pyx_2 = __Pyx_GetName(__pyx_b, __pyx_n_Exception); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 121; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 121; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_2);
  __pyx_2 = 0;
  __pyx_2 = __Pyx_CreateClass(__pyx_3, __pyx_1, __pyx_n_HyperEstraierError, "_hype"); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 121; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":122 */
  if (PyObject_SetAttr(__pyx_m, __pyx_n_HyperEstraierError, __pyx_2) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 121; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":124 */
  __pyx_3 = PyDict_New(); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 124; goto __pyx_L1;}
  __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n_HyperEstraierError); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 124; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 124; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
  __pyx_1 = 0;
  __pyx_1 = __Pyx_CreateClass(__pyx_2, __pyx_3, __pyx_n_DBError, "_hype"); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 124; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":125 */
  if (PyObject_SetAttr(__pyx_m, __pyx_n_DBError, __pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 124; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":127 */
  __pyx_2 = PyDict_New(); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 127; goto __pyx_L1;}
  __pyx_3 = __Pyx_GetName(__pyx_m, __pyx_n_HyperEstraierError); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 127; goto __pyx_L1;}
  __pyx_1 = PyTuple_New(1); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 127; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_1, 0, __pyx_3);
  __pyx_3 = 0;
  __pyx_3 = __Pyx_CreateClass(__pyx_1, __pyx_2, __pyx_n_DocumentError, "_hype"); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 127; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":128 */
  if (PyObject_SetAttr(__pyx_m, __pyx_n_DocumentError, __pyx_3) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 127; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":130 */
  __pyx_1 = PyDict_New(); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 130; goto __pyx_L1;}
  __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_DocumentError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 130; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 130; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_2);
  __pyx_2 = 0;
  __pyx_2 = __Pyx_CreateClass(__pyx_3, __pyx_1, __pyx_n_DocModifyImmutableError, "_hype"); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 130; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":131 */
  if (PyObject_SetAttr(__pyx_m, __pyx_n_DocModifyImmutableError, __pyx_2) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 130; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":133 */
  __pyx_3 = PyDict_New(); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 133; goto __pyx_L1;}
  __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n_DocumentError); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 133; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 133; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
  __pyx_1 = 0;
  __pyx_1 = __Pyx_CreateClass(__pyx_2, __pyx_3, __pyx_n_DocNeverAddedError, "_hype"); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 133; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":134 */
  if (PyObject_SetAttr(__pyx_m, __pyx_n_DocNeverAddedError, __pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 133; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":136 */
  __pyx_2 = PyDict_New(); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 136; goto __pyx_L1;}
  __pyx_3 = __Pyx_GetName(__pyx_m, __pyx_n_DBError); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 136; goto __pyx_L1;}
  __pyx_1 = PyTuple_New(1); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 136; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_1, 0, __pyx_3);
  __pyx_3 = 0;
  __pyx_3 = __Pyx_CreateClass(__pyx_1, __pyx_2, __pyx_n_DBEditError, "_hype"); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 136; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":137 */
  if (PyObject_SetAttr(__pyx_m, __pyx_n_DBEditError, __pyx_3) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 136; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":139 */
  __pyx_1 = PyDict_New(); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 139; goto __pyx_L1;}
  __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_DBError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 139; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 139; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_2);
  __pyx_2 = 0;
  __pyx_2 = __Pyx_CreateClass(__pyx_3, __pyx_1, __pyx_n_DBRemoveError, "_hype"); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 139; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":140 */
  if (PyObject_SetAttr(__pyx_m, __pyx_n_DBRemoveError, __pyx_2) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 139; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":142 */
  __pyx_3 = PyDict_New(); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 142; goto __pyx_L1;}
  __pyx_1 = __Pyx_GetName(__pyx_m, __pyx_n_DBError); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 142; goto __pyx_L1;}
  __pyx_2 = PyTuple_New(1); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 142; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_2, 0, __pyx_1);
  __pyx_1 = 0;
  __pyx_1 = __Pyx_CreateClass(__pyx_2, __pyx_3, __pyx_n_DBFlushError, "_hype"); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 142; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":143 */
  if (PyObject_SetAttr(__pyx_m, __pyx_n_DBFlushError, __pyx_1) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 142; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":145 */
  __pyx_2 = PyDict_New(); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 145; goto __pyx_L1;}
  __pyx_3 = __Pyx_GetName(__pyx_m, __pyx_n_DBError); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 145; goto __pyx_L1;}
  __pyx_1 = PyTuple_New(1); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 145; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_1, 0, __pyx_3);
  __pyx_3 = 0;
  __pyx_3 = __Pyx_CreateClass(__pyx_1, __pyx_2, __pyx_n_DBSyncError, "_hype"); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 145; goto __pyx_L1;}
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":146 */
  if (PyObject_SetAttr(__pyx_m, __pyx_n_DBSyncError, __pyx_3) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 145; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":148 */
  __pyx_1 = PyDict_New(); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 148; goto __pyx_L1;}
  __pyx_2 = __Pyx_GetName(__pyx_m, __pyx_n_DBError); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 148; goto __pyx_L1;}
  __pyx_3 = PyTuple_New(1); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 148; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_3, 0, __pyx_2);
  __pyx_2 = 0;
  __pyx_2 = __Pyx_CreateClass(__pyx_3, __pyx_1, __pyx_n_DBOptimizeError, "_hype"); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 148; goto __pyx_L1;}
  Py_DECREF(__pyx_3); __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":149 */
  if (PyObject_SetAttr(__pyx_m, __pyx_n_DBOptimizeError, __pyx_2) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 148; goto __pyx_L1;}
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  Py_DECREF(__pyx_1); __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":208 */
  Py_INCREF(Py_None);
  __pyx_k13 = Py_None;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":229 */
  __pyx_k14 = ESTODCLEAN;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":270 */
  __pyx_3 = PyInt_FromLong((ESTDBWRITER | ESTDBCREAT)); if (!__pyx_3) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 270; goto __pyx_L1;}
  __pyx_k15 = __pyx_3;
  __pyx_3 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":315 */
  __pyx_k16 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":334 */
  __pyx_k17 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":346 */
  __pyx_k18 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":352 */
  Py_INCREF(Py_None);
  __pyx_k19 = Py_None;
  __pyx_1 = __Pyx_GetName(__pyx_b, __pyx_n_False); if (!__pyx_1) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 352; goto __pyx_L1;}
  __pyx_k20 = __pyx_1;
  __pyx_1 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":362 */
  __pyx_k21 = ESTODCLEAN;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":468 */
  __pyx_2 = PyDict_New(); if (!__pyx_2) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 468; goto __pyx_L1;}
  __pyx_4 = __Pyx_GetName(__pyx_b, __pyx_n_object); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 468; goto __pyx_L1;}
  __pyx_5 = PyTuple_New(1); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 468; goto __pyx_L1;}
  PyTuple_SET_ITEM(__pyx_5, 0, __pyx_4);
  __pyx_4 = 0;
  __pyx_4 = __Pyx_CreateClass(__pyx_5, __pyx_2, __pyx_n_SearchIterator, "_hype"); if (!__pyx_4) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 468; goto __pyx_L1;}
  Py_DECREF(__pyx_5); __pyx_5 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":470 */
  __pyx_5 = PyCFunction_New(&__pyx_mdef_5_hype_14SearchIterator___init__, 0); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 470; goto __pyx_L1;}
  __pyx_6 = PyMethod_New(__pyx_5, 0, __pyx_4); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 470; goto __pyx_L1;}
  Py_DECREF(__pyx_5); __pyx_5 = 0;
  if (PyObject_SetAttr(__pyx_4, __pyx_n___init__, __pyx_6) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 470; goto __pyx_L1;}
  Py_DECREF(__pyx_6); __pyx_6 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":477 */
  __pyx_5 = PyCFunction_New(&__pyx_mdef_5_hype_14SearchIterator___iter__, 0); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 477; goto __pyx_L1;}
  __pyx_6 = PyMethod_New(__pyx_5, 0, __pyx_4); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 477; goto __pyx_L1;}
  Py_DECREF(__pyx_5); __pyx_5 = 0;
  if (PyObject_SetAttr(__pyx_4, __pyx_n___iter__, __pyx_6) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 477; goto __pyx_L1;}
  Py_DECREF(__pyx_6); __pyx_6 = 0;

  /* "/Volumes/dati/Sviluppo/hype/trunk/hype/_hype.pyx":480 */
  __pyx_5 = PyCFunction_New(&__pyx_mdef_5_hype_14SearchIterator_next, 0); if (!__pyx_5) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 480; goto __pyx_L1;}
  __pyx_6 = PyMethod_New(__pyx_5, 0, __pyx_4); if (!__pyx_6) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 480; goto __pyx_L1;}
  Py_DECREF(__pyx_5); __pyx_5 = 0;
  if (PyObject_SetAttr(__pyx_4, __pyx_n_next, __pyx_6) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 480; goto __pyx_L1;}
  Py_DECREF(__pyx_6); __pyx_6 = 0;
  if (PyObject_SetAttr(__pyx_m, __pyx_n_SearchIterator, __pyx_4) < 0) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 468; goto __pyx_L1;}
  Py_DECREF(__pyx_4); __pyx_4 = 0;
  Py_DECREF(__pyx_2); __pyx_2 = 0;
  return;
  __pyx_L1:;
  Py_XDECREF(__pyx_1);
  Py_XDECREF(__pyx_2);
  Py_XDECREF(__pyx_3);
  Py_XDECREF(__pyx_4);
  Py_XDECREF(__pyx_5);
  Py_XDECREF(__pyx_6);
  __Pyx_AddTraceback("_hype");
}

static char *__pyx_filenames[] = {
  "_hype.pyx",
};
statichere char **__pyx_f = __pyx_filenames;

/* Runtime support code */

static int __Pyx_ArgTypeTest(PyObject *obj, PyTypeObject *type, int none_allowed, char *name) {
    if (!type) {
        PyErr_Format(PyExc_SystemError, "Missing type object");
        return 0;
    }
    if ((none_allowed && obj == Py_None) || PyObject_TypeCheck(obj, type))
        return 1;
    PyErr_Format(PyExc_TypeError,
        "Argument '%s' has incorrect type (expected %s, got %s)",
        name, type->tp_name, obj->ob_type->tp_name);
    return 0;
}

static PyObject *__Pyx_GetName(PyObject *dict, PyObject *name) {
    PyObject *result;
    result = PyObject_GetAttr(dict, name);
    if (!result)
        PyErr_SetObject(PyExc_NameError, name);
    return result;
}

static PyObject *__Pyx_CreateClass(
    PyObject *bases, PyObject *dict, PyObject *name, char *modname)
{
    PyObject *py_modname;
    PyObject *result = 0;
    
    py_modname = PyString_FromString(modname);
    if (!py_modname)
        goto bad;
    if (PyDict_SetItemString(dict, "__module__", py_modname) < 0)
        goto bad;
    result = PyClass_New(bases, dict, name);
bad:
    Py_XDECREF(py_modname);
    return result;
}

static void __Pyx_Raise(PyObject *type, PyObject *value, PyObject *tb) {
    Py_XINCREF(type);
    Py_XINCREF(value);
    Py_XINCREF(tb);
    /* First, check the traceback argument, replacing None with NULL. */
    if (tb == Py_None) {
        Py_DECREF(tb);
        tb = 0;
    }
    else if (tb != NULL && !PyTraceBack_Check(tb)) {
        PyErr_SetString(PyExc_TypeError,
            "raise: arg 3 must be a traceback or None");
        goto raise_error;
    }
    /* Next, replace a missing value with None */
    if (value == NULL) {
        value = Py_None;
        Py_INCREF(value);
    }
    /* Next, repeatedly, replace a tuple exception with its first item */
    while (PyTuple_Check(type) && PyTuple_Size(type) > 0) {
        PyObject *tmp = type;
        type = PyTuple_GET_ITEM(type, 0);
        Py_INCREF(type);
        Py_DECREF(tmp);
    }
    if (PyString_Check(type))
        ;
    else if (PyClass_Check(type))
        ; /*PyErr_NormalizeException(&type, &value, &tb);*/
    else if (PyInstance_Check(type)) {
        /* Raising an instance.  The value should be a dummy. */
        if (value != Py_None) {
            PyErr_SetString(PyExc_TypeError,
              "instance exception may not have a separate value");
            goto raise_error;
        }
        else {
            /* Normalize to raise <class>, <instance> */
            Py_DECREF(value);
            value = type;
            type = (PyObject*) ((PyInstanceObject*)type)->in_class;
            Py_INCREF(type);
        }
    }
    else {
        /* Not something you can raise.  You get an exception
           anyway, just not what you specified :-) */
        PyErr_Format(PyExc_TypeError,
                 "exceptions must be strings, classes, or "
                 "instances, not %s", type->ob_type->tp_name);
        goto raise_error;
    }
    PyErr_Restore(type, value, tb);
    return;
raise_error:
    Py_XDECREF(value);
    Py_XDECREF(type);
    Py_XDECREF(tb);
    return;
}

static int __Pyx_TypeTest(PyObject *obj, PyTypeObject *type) {
    if (!type) {
        PyErr_Format(PyExc_SystemError, "Missing type object");
        return 0;
    }
    if (obj == Py_None || PyObject_TypeCheck(obj, type))
        return 1;
    PyErr_Format(PyExc_TypeError, "Cannot convert %s to %s",
        obj->ob_type->tp_name, type->tp_name);
    return 0;
}

static int __Pyx_InternStrings(__Pyx_InternTabEntry *t) {
    while (t->p) {
        *t->p = PyString_InternFromString(t->s);
        if (!*t->p)
            return -1;
        ++t;
    }
    return 0;
}

static int __Pyx_InitStrings(__Pyx_StringTabEntry *t) {
    while (t->p) {
        *t->p = PyString_FromStringAndSize(t->s, t->n - 1);
        if (!*t->p)
            return -1;
        ++t;
    }
    return 0;
}

static int __Pyx_SetVtable(PyObject *dict, void *vtable) {
    PyObject *pycobj = 0;
    int result;
    
    pycobj = PyCObject_FromVoidPtr(vtable, 0);
    if (!pycobj)
        goto bad;
    if (PyDict_SetItemString(dict, "__pyx_vtable__", pycobj) < 0)
        goto bad;
    result = 0;
    goto done;

bad:
    result = -1;
done:
    Py_XDECREF(pycobj);
    return result;
}

#include "compile.h"
#include "frameobject.h"
#include "traceback.h"

static void __Pyx_AddTraceback(char *funcname) {
    PyObject *py_srcfile = 0;
    PyObject *py_funcname = 0;
    PyObject *py_globals = 0;
    PyObject *empty_tuple = 0;
    PyObject *empty_string = 0;
    PyCodeObject *py_code = 0;
    PyFrameObject *py_frame = 0;
    
    py_srcfile = PyString_FromString(__pyx_filename);
    if (!py_srcfile) goto bad;
    py_funcname = PyString_FromString(funcname);
    if (!py_funcname) goto bad;
    py_globals = PyModule_GetDict(__pyx_m);
    if (!py_globals) goto bad;
    empty_tuple = PyTuple_New(0);
    if (!empty_tuple) goto bad;
    empty_string = PyString_FromString("");
    if (!empty_string) goto bad;
    py_code = PyCode_New(
        0,            /*int argcount,*/
        0,            /*int nlocals,*/
        0,            /*int stacksize,*/
        0,            /*int flags,*/
        empty_string, /*PyObject *code,*/
        empty_tuple,  /*PyObject *consts,*/
        empty_tuple,  /*PyObject *names,*/
        empty_tuple,  /*PyObject *varnames,*/
        empty_tuple,  /*PyObject *freevars,*/
        empty_tuple,  /*PyObject *cellvars,*/
        py_srcfile,   /*PyObject *filename,*/
        py_funcname,  /*PyObject *name,*/
        __pyx_lineno,   /*int firstlineno,*/
        empty_string  /*PyObject *lnotab*/
    );
    if (!py_code) goto bad;
    py_frame = PyFrame_New(
        PyThreadState_Get(), /*PyThreadState *tstate,*/
        py_code,             /*PyCodeObject *code,*/
        py_globals,          /*PyObject *globals,*/
        0                    /*PyObject *locals*/
    );
    if (!py_frame) goto bad;
    py_frame->f_lineno = __pyx_lineno;
    PyTraceBack_Here(py_frame);
bad:
    Py_XDECREF(py_srcfile);
    Py_XDECREF(py_funcname);
    Py_XDECREF(empty_tuple);
    Py_XDECREF(empty_string);
    Py_XDECREF(py_code);
    Py_XDECREF(py_frame);
}
